<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>ExSeisDat: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ExSeisDat
   &#160;<span id="projectnumber">0.0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('index.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">ExSeisDat Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>ExSeisDat is a High Performance I/O library for seismic data files, primarily the SEG-Y format.</p>
<p>It includes a low-level parallel file I/O library, ExSeisPIOL, primarily targeting MPI I/O, containing routines for selectively loading and processing meta-data and trace data.</p>
<p>Also included is a high-level library, ExSeisFlow, which uses ExSeisPIOL to implement a number of seismic data workflows, e.g. sorting data, binning, trace analysis, file concatenation, etc.</p>
<h2>Building Instructions</h2>
<p>To configure and build ExSeisDat, a C++14 compatible compiler is needed, and CMake &gt;= 3.5.2. </p>
<pre class="fragment"># Make a directory to hold the temporary build files
mkdir -p /path/to/build/directory

# Change directory to the build directory
cd /path/to/build/directory

# Configure the ExSeisDat build using CMake
cmake \
    -DCMAKE_INSTALL_PREFIX=/path/to/install/directory \
    /path/to/the/exseisdat/project

# Build the ExSeisDat project
make

# Test the ExSeisDat project
make test

# Install the ExSeisDat project
make install

# (Optional) clean up all the temporary build files
# cd $HOME
# rm -rf /path/to/build/directory
</pre><p>CMake should find the necessary MPI and FFTW libraries automatically. It also searches for the C and C++ compilers in the CC and CXX environmental variables.</p>
<h3>Specifying MPI</h3>
<p>If CMake can't find MPI, or finds the wrong version of MPI, pass the options <code>-DMPI_C_COMPILER=/path/to/mpicc</code> and <code>-DMPI_CXX_COMPILER=/path/to/mpicxx</code> to the <code>cmake</code> command, e.g. </p>
<pre class="fragment">cmake /path/to/the/exseisdat/project \
    -DCMAKE_INSTALL_PREFIX=/path/to/install/directory \
    -DMPI_C_COMPILER=/path/to/mpicc \
    -DMPI_CXX_COMPILER=/path/to/mpicxx
</pre><p>which should automatically reconfigure and recompile only the minimum necessary files.</p>
<p>To specify the MPI compiler <em>and</em> the C and C++ compilers, use the <code>-DCMAKE_C_COMPILER</code> and <code>-DCMAKE_CXX_COMPILER</code> options along with <code>-DMPI_C_COMPILER</code> and <code>-DMPI_CXX_COMPILER</code>, e.g. </p>
<pre class="fragment">cmake /path/to/the/exseisdat/project \
    -DCMAKE_INSTALL_PREFIX=/path/to/install/directory \
    -DMPI_C_COMPILER=/path/to/mpicc \
    -DMPI_CXX_COMPILER=/path/to/mpicxx \
    -DCMAKE_C_COMPILER=/path/to/cc \
    -DCMAKE_CXX_COMPILER=/path/to/c++
</pre><p>Alternatively, set <code>export CC=/path/to/mpicc</code> and <code>export CXX=/path/to/mpicxx</code> in your environment (optionally, also the appropriate MPI compiler variables, e.g. <code>I_MPI_CC</code> and <code>I_MPI_CXX</code>, to find the correct <code>C</code> and <code>CXX</code> compilers) before running the <code>cmake</code> command to find the correct MPI libraries. If CMake doesn't find them after setting <code>CC</code> and <code>CXX</code>, you may need to delete the build directory and reconfigure.</p>
<h3>Specifying FFTW</h3>
<p>If CMake can't find FFTW, or finds the wrong version, try passing <code>-DFFTW3_DIR=/path/to/fftw</code> to the <code>cmake</code> command. The directory <code>/path/to/fftw</code> should be the directory including <code>include/fftw3.h</code>, for a full path of <code>/path/to/fftw/include/fftw3.h</code>. CMake will also look for <code>/path/to/fftw/local/include/fftw3.h</code>. The FFTW library should be found at <code>/path/to/fftw/lib/libfftw3f.so</code>. CMake will also look in the <code>lib64</code> and <code>bin</code> directories, and the <code>local/lib</code> directory (also <code>lib64</code> and <code>bin</code>) if fftw3.h was found in <code>local/include</code>.</p>
<p>If the Intel compiler is used, CMake will use the <code>-mkl</code> flag to link the Intel MKL library instead of FFTW.</p>
<h3>Build Flags</h3>
<p>CMake has a number of pre-configured build modes: mainly Release and Debug.</p>
<p>To build ExSeisDat in its release configuration (<code>-O3</code>, no asserts, no debug symbols) pass <code>-DCMAKE_BUILD_TYPE=Release</code> to the <code>cmake</code> command. This is the default if this option isn't passed.</p>
<p>To build ExSeisDat in its debug configuration (asserts enabled, debug symbols added) pass <code>-DCMAKE_BUILD_TYPE=Debug</code> to the <code>cmake</code> command.</p>
<p>To add extra flags to the build, use the <code>-DCMAKE_C_FLAGS</code> and <code>-DCMAKE_CXX_FLAGS</code> options. For example, to include <code>-O1</code> and address sanitization for debug builds, pass </p>
<pre class="fragment">cmake \
    -DCMAKE_CXX_FLAGS="-O1 -fsanitize=address" \
    /path/to/the/exseisdat/project
</pre><h3>A Suggestion</h3>
<p>One easy way of developing ExSeisDat with CMake is to put the configuration / build commands in a script file, have the script file in the project directory, and have the build directory as a subdirectory in the project directory.</p>
<p>If we call it e.g. make.sh, we can write the following: </p>
<pre class="fragment">#!/usr/bin/env bash
# Contents of make.sh:

# Exit script on first non-zero return
set -o errexit

# Get the directory containing this script!
script_dir="$( cd "$( dirname "${BASH_SOURCE[0]}" )" &amp;&amp; pwd )"

source_dir=${script_dir}
build_dir=${script_dir}/build/build
install_dir=${script_dir}/build/install

mkdir -p ${build_dir}
mkdir -p ${install_dir}

# Load whatever modules are necessary
# e.g. using the Intel compiler on Fionn:
# module load dev
# module load cmake/intel/3.5.2
# module load intel/latest
# module load openmpi/intel/1.8.3

# Use gcc and g++ instead of icc and icpc for GCC!
cd ${build_dir}
cmake ${source_dir} \
    -DCMAKE_INSTALL_PREFIX=${install_dir} \
    -DCMAKE_BUILD_TYPE=Debug \
    -DCMAKE_C_COMPILER=icc \
    -DCMAKE_CXX_COMPILER=icpc \
    -DCMAKE_C_FLAGS="-O1 -fsanitize=address" \
    -DCMAKE_CXX_FLAGS="-O1 -fsanitize=address"
cd ${script_dir}

make -C ${build_dir}
make -C ${build_dir} test
make -C ${build_dir} install
</pre><p>Now, running <code>./make.sh</code> should configure, build, test, install all the necessary files and components automatically. When any files are changed in the project, running this command should reconfigure and recompile only the minimum necessary files, and run the test suite over the whole project. Reconfiguration should be reasonably cheap, unless the CMakeLists.txt files have been altered.</p>
<p>In this manner, flags and configuration options can be quickly changed, and easily tracked. Testing can also be disabled by simply commenting out the <code>make -C ${build_dir} test</code> command.</p>
<p>Note: It can be easy to forget the trailing <code>\</code> for line continuation in the <code>cmake</code> command! If you get error messages like <code>Cannot find command -DCMAKE_...</code>, a missing <code>\</code> is the likely culprit!</p>
<h4>Modulefiles</h4>
<p>Putting module commands here also makes the compilation environment clear.</p>
<p>Some care may be taken, as some environments aren't configured for using <code>module</code> commands in a script by default. Users may need to use <code>source /path/to/modules/init</code> to make <code>module</code> available in the script. On Fionn, for example, use <code>source /usr/share/modules/init/bash</code>.</p>
<h3>Useful Options</h3>
<h4>Setting Compile / Link Flags</h4>
<table class="doxtable">
<tr>
<th>Option </th><th>Effect  </th></tr>
<tr>
<td><code>-DCMAKE_C_COMPILER=...</code> </td><td>Set the C compiler. </td></tr>
<tr>
<td><code>-DCMAKE_CXX_COMPILER=...</code> </td><td>Set the C++ compiler. </td></tr>
<tr>
<td><code>-DCMAKE_BUILD_TYPE=...</code> </td><td>Set to <code>Release</code> or <code>Debug</code> for release or debug builds. Sets a number of flags by default. </td></tr>
<tr>
<td><code>-DCMAKE_C_FLAGS=...</code> </td><td>Set the flags to pass to the C compiler. Overrides the default flags. </td></tr>
<tr>
<td><code>-DCMAKE_CXX_FLAGS=...</code> </td><td>Set the flags to pass to the C++ compiler. Overrides the default flags. </td></tr>
<tr>
<td><code>-DBUILD_SHARED_LIBS=...</code> </td><td>Set to <code>ON</code> to build shared libraries, of <code>OFF</code> for static libraries. </td></tr>
<tr>
<td><code>-DCMAKE_SHARED_LINKER_FLAGS=...</code> </td><td>Set the flags to pass to the shared library linker. </td></tr>
<tr>
<td><code>-DCMAKE_STATIC_LINKER_FLAGS=...</code> </td><td>Set the flags to pass to the static library linker. </td></tr>
<tr>
<td><code>-DCMAKE_EXE_LINKER_FLAGS=...</code> </td><td>Set the flags to pass to the executable linker. </td></tr>
<tr>
<td><code>-DCMAKE_VERBOSE_MAKEFILE=ON</code> </td><td>Output the build commands as they're run. </td></tr>
</table>
<h4>Dependencies</h4>
<table class="doxtable">
<tr>
<th>Option </th><th>Effect  </th></tr>
<tr>
<td><code>-DMPI_C_COMPILER=...</code> </td><td>Set the MPI C compiler wrapper (i.e. mpicc). </td></tr>
<tr>
<td><code>-DMPI_CXX_COMPILER=...</code> </td><td>Set the MPI C++ compiler wrapper (i.e. mpicxx). </td></tr>
<tr>
<td><code>-DFFTW3_DIR=...</code> </td><td>Set the root directory for FFTW, where CMake should look for <code>fftw3.h</code> and <code>libfftw3f.so</code>. </td></tr>
<tr>
<td><code>-DFFTW3_INCLUDES=...</code> </td><td>Explicitly set the <code>fftw3.h</code> header file to use. </td></tr>
<tr>
<td><code>-DFFTW3_LIBRARIES=...</code> </td><td>Explicitly set the <code>libfftw3f.so</code> library file or flag (e.g. <code>-lfftw3f</code> or <code>-mkl</code>) to use. </td></tr>
</table>
<h4>Enabling / Disabling Sections of ExSeisDat</h4>
<table class="doxtable">
<tr>
<th>Option </th><th>Effect  </th></tr>
<tr>
<td><code>-DEXSEISDAT_BUILD_UTILITIES=...</code> </td><td>Set to <code>ON</code> to build ExSeisDat utilities or <code>OFF</code> to skip (Default <code>ON</code>). </td></tr>
<tr>
<td><code>-DEXSEISDAT_BUILD_EXAMPLES=...</code> </td><td>Set to <code>ON</code> to build ExSeisDat example programs or <code>OFF</code> to skip (Default <code>ON</code>). </td></tr>
<tr>
<td><code>-DEXSEISDAT_BUILD_TESTS=...</code> </td><td>Set to <code>ON</code> to build ExSeisDat tests and enable the <code>make test</code> target, or <code>OFF</code> to skip (Default <code>ON</code>). </td></tr>
</table>
<h4>Installation Directories</h4>
<table class="doxtable">
<tr>
<th>Option </th><th>Effect  </th></tr>
<tr>
<td><code>-DCMAKE_INSTALL_PREFIX=...</code> </td><td>Set the root install directory for the compiled libraries and programs. </td></tr>
<tr>
<td><code>-DCMAKE_INSTALL_BINDIR=...</code> </td><td>Set the install directory for ExSeisDat executables. Use a relative path to set the path relative to <code>${CMAKE_INSTALL_PREFIX}</code>. (Default <code>bin</code>) </td></tr>
<tr>
<td><code>-DCMAKE_INSTALL_LIBDIR=...</code> </td><td>Set the install directory for ExSeisDat libraries. Use a relative path to set the path relative to <code>${CMAKE_INSTALL_PREFIX}</code>. (Default <code>lib</code>) </td></tr>
</table>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Aug 13 2018 18:26:39 for ExSeisDat by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
