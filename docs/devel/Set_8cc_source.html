<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>ExSeisDat: /home/travis/build/poconbhui/ExSeisDat/src/Flow/Set.cc Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ExSeisDat
   &#160;<span id="projectnumber">0.0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('Set_8cc_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Set.cc</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Set_8hh.html">ExSeisDat/Flow/Set.hh</a>&quot;</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Op_8hh.html">ExSeisDat/Flow/Op.hh</a>&quot;</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="RadonGatherState_8hh.html">ExSeisDat/Flow/RadonGatherState.hh</a>&quot;</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ReadSEGY_8hh.html">ExSeisDat/PIOL/ReadSEGY.hh</a>&quot;</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="WriteSEGY_8hh.html">ExSeisDat/PIOL/WriteSEGY.hh</a>&quot;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="makeFile_8hh.html">ExSeisDat/PIOL/makeFile.hh</a>&quot;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="gather_8hh.html">ExSeisDat/PIOL/operations/gather.hh</a>&quot;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="param__utils_8hh.html">ExSeisDat/PIOL/param_utils.hh</a>&quot;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AGC_8h.html">ExSeisDat/utils/signal_processing/AGC.h</a>&quot;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &lt;glob.h&gt;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &lt;numeric&gt;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &lt;regex&gt;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="keyword">using namespace </span>exseis::utils;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="keyword">using namespace </span>exseis::PIOL;</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="keyword">namespace </span>exseis {</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="keyword">namespace </span>Flow {</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div>
<div class="line"><a name="l00027"></a><span class="lineno"><a class="line" href="namespaceexseis_1_1Flow.html#a5af232da7db8c2988c7bee1acec031fb">   27</a></span>&#160;<span class="keyword">typedef</span> std::function&lt;void(const TraceBlock* in, TraceBlock* out)&gt; <a class="code" href="namespaceexseis_1_1Flow.html#a5af232da7db8c2988c7bee1acec031fb">Mod</a>;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div>
<div class="line"><a name="l00031"></a><span class="lineno"><a class="line" href="namespaceexseis_1_1Flow.html#a45e455f7e693a68b1678eb3a44f99534">   31</a></span>&#160;<span class="keyword">typedef</span> std::function&lt;std::vector&lt;size_t&gt;(<a class="code" href="structexseis_1_1Flow_1_1TraceBlock.html">TraceBlock</a>* data)&gt; <a class="code" href="namespaceexseis_1_1Flow.html#a45e455f7e693a68b1678eb3a44f99534">InPlaceMod</a>;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div>
<div class="line"><a name="l00034"></a><span class="lineno"><a class="line" href="classexseis_1_1Flow_1_1Set.html#abb95720c426709b2a184e4f4a4b10911">   34</a></span>&#160;Set::Set(</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  std::shared_ptr&lt;ExSeisPIOL&gt; piol_,</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  std::string pattern,</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  std::string outfix_,</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  std::shared_ptr&lt;Rule&gt; rule_) :</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    piol(piol_),</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    outfix(outfix_),</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    rule(rule_),</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    cache(piol_)</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;{</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <a class="code" href="classexseis_1_1Flow_1_1Set.html#ab9472ef15983375110b9fce89c38e013">rank</a>    = <a class="code" href="classexseis_1_1Flow_1_1Set.html#a5b52ce04333a5b8af6ec1c1b31ee846a">piol</a>-&gt;comm-&gt;getRank();</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <a class="code" href="classexseis_1_1Flow_1_1Set.html#a2e93309ef516832b37ab4f61eed06d61">numRank</a> = <a class="code" href="classexseis_1_1Flow_1_1Set.html#a5b52ce04333a5b8af6ec1c1b31ee846a">piol</a>-&gt;comm-&gt;getNumRank();</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <a class="code" href="classexseis_1_1Flow_1_1Set.html#aab1e5779be267c98d09ac2375ec2e2ac">add</a>(pattern);</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;}</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div>
<div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="classexseis_1_1Flow_1_1Set.html#a531a19e7a6d2ae3e39b4e6f6c3514205">   49</a></span>&#160;<a class="code" href="classexseis_1_1Flow_1_1Set.html#abb95720c426709b2a184e4f4a4b10911">Set::Set</a>(std::shared_ptr&lt;ExSeisPIOL&gt; piol_, std::shared_ptr&lt;Rule&gt; rule_) :</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    piol(piol_),</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    rule(rule_),</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    cache(piol_)</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;{</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <a class="code" href="classexseis_1_1Flow_1_1Set.html#ab9472ef15983375110b9fce89c38e013">rank</a>    = <a class="code" href="classexseis_1_1Flow_1_1Set.html#a5b52ce04333a5b8af6ec1c1b31ee846a">piol</a>-&gt;comm-&gt;getRank();</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <a class="code" href="classexseis_1_1Flow_1_1Set.html#a2e93309ef516832b37ab4f61eed06d61">numRank</a> = <a class="code" href="classexseis_1_1Flow_1_1Set.html#a5b52ce04333a5b8af6ec1c1b31ee846a">piol</a>-&gt;comm-&gt;getNumRank();</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;}</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div>
<div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="classexseis_1_1Flow_1_1Set.html#a2670385a98d96352b22f84516a1798df">   58</a></span>&#160;<a class="code" href="classexseis_1_1Flow_1_1Set.html#a2670385a98d96352b22f84516a1798df">Set::~Set</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;{</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classexseis_1_1Flow_1_1Set.html#a530bb61158d2c999faf0d290b3758cc8">outfix</a>.empty()) {</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        <a class="code" href="classexseis_1_1Flow_1_1Set.html#a16775d9b078ad31adc28f10f8349e6f3">output</a>(<a class="code" href="classexseis_1_1Flow_1_1Set.html#a530bb61158d2c999faf0d290b3758cc8">outfix</a>);</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    }</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;}</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div>
<div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="classexseis_1_1Flow_1_1Set.html#aab1e5779be267c98d09ac2375ec2e2ac">   65</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classexseis_1_1Flow_1_1Set.html#aab1e5779be267c98d09ac2375ec2e2ac">Set::add</a>(std::unique_ptr&lt;ReadInterface&gt; in)</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;{</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <a class="code" href="classexseis_1_1Flow_1_1Set.html#a43254c7db9128d6cd1ef553b8bc175f1">file</a>.emplace_back(std::make_shared&lt;FileDesc&gt;());</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="keyword">auto</span>&amp; f = <a class="code" href="classexseis_1_1Flow_1_1Set.html#a43254c7db9128d6cd1ef553b8bc175f1">file</a>.back();</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    f-&gt;ifc  = std::move(in);</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="keyword">auto</span> dec = <a class="code" href="namespaceexseis_1_1utils_1_1decomposition.html#a82dafa151b9e1c07265fb50c0ddfbc69">utils::block_decomposition</a>(</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;      f-&gt;ifc-&gt;readNt(), <a class="code" href="classexseis_1_1Flow_1_1Set.html#a5b52ce04333a5b8af6ec1c1b31ee846a">piol</a>-&gt;comm-&gt;getNumRank(), <a class="code" href="classexseis_1_1Flow_1_1Set.html#a5b52ce04333a5b8af6ec1c1b31ee846a">piol</a>-&gt;comm-&gt;getRank());</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    f-&gt;ilst.resize(dec.local_size);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    f-&gt;olst.resize(dec.local_size);</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    std::iota(f-&gt;ilst.begin(), f-&gt;ilst.end(), dec.global_offset);</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="keyword">auto</span> key = std::make_pair&lt;size_t, exseis::utils::Floating_point&gt;(</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;      f-&gt;ifc-&gt;readNs(), f-&gt;ifc-&gt;readInc());</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <a class="code" href="classexseis_1_1Flow_1_1Set.html#acc4506a2b1148d77e698c5bcb7d3d2ed">fmap</a>[key].emplace_back(f);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="keyword">auto</span>&amp; <a class="code" href="namespaceexseis_1_1PIOL.html#a9069647cb4d44fcbd30ceced3606dd29">off</a> = <a class="code" href="classexseis_1_1Flow_1_1Set.html#a8390e921618b995b4da5c5ed063dc928">offmap</a>[key];</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    std::iota(f-&gt;olst.begin(), f-&gt;olst.end(), <a class="code" href="namespaceexseis_1_1PIOL.html#a9069647cb4d44fcbd30ceced3606dd29">off</a> + dec.global_offset);</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <a class="code" href="namespaceexseis_1_1PIOL.html#a9069647cb4d44fcbd30ceced3606dd29">off</a> += f-&gt;ifc-&gt;readNt();</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;}</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="classexseis_1_1Flow_1_1Set.html#a7ff0c3f9ddf1efa87086d0a6e138b738">   87</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classexseis_1_1Flow_1_1Set.html#aab1e5779be267c98d09ac2375ec2e2ac">Set::add</a>(std::string pattern)</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;{</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <a class="code" href="classexseis_1_1Flow_1_1Set.html#aa97113d10c048fce74f34ffad50cf576">outmsg</a> = <span class="stringliteral">&quot;ExSeisPIOL: Set layer output\n&quot;</span>;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    glob_t globs;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="keywordtype">int</span> err = glob(pattern.c_str(), GLOB_TILDE | GLOB_MARK, NULL, &amp;globs);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keywordflow">if</span> (err != 0) {</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        exit(-1);</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    }</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    std::regex reg(</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;      <span class="stringliteral">&quot;.*se?gy$&quot;</span>, std::regex_constants::icase | std::regex_constants::optimize</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;                    | std::regex::extended);</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; globs.gl_pathc; i++) {</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        <span class="comment">// For each input file which matches the regex</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        <span class="keywordflow">if</span> (std::regex_match(globs.gl_pathv[i], reg)) {</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;            <a class="code" href="classexseis_1_1Flow_1_1Set.html#aab1e5779be267c98d09ac2375ec2e2ac">add</a>(makeFile&lt;ReadSEGY&gt;(<a class="code" href="classexseis_1_1Flow_1_1Set.html#a5b52ce04333a5b8af6ec1c1b31ee846a">piol</a>, globs.gl_pathv[i]));</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        }</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    }</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    globfree(&amp;globs);</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <a class="code" href="classexseis_1_1Flow_1_1Set.html#a5b52ce04333a5b8af6ec1c1b31ee846a">piol</a>-&gt;isErr();</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;}</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div>
<div class="line"><a name="l00111"></a><span class="lineno"><a class="line" href="classexseis_1_1Flow_1_1Set.html#a1521b6a65f8344571bbd8b0a85fb3795">  111</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classexseis_1_1Flow_1_1Set.html#a1521b6a65f8344571bbd8b0a85fb3795">Set::summary</a>(<span class="keywordtype">void</span>)<span class="keyword"> const</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; f : <a class="code" href="classexseis_1_1Flow_1_1Set.html#a43254c7db9128d6cd1ef553b8bc175f1">file</a>) {</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        std::string msg = <span class="stringliteral">&quot;name: &quot;</span> + f-&gt;ifc-&gt;readName() + <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;                          + <span class="stringliteral">&quot;-\tNs: &quot;</span> + std::to_string(f-&gt;ifc-&gt;readNs()) + <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                          + <span class="stringliteral">&quot;-\tNt: &quot;</span> + std::to_string(f-&gt;ifc-&gt;readNt()) + <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                          + <span class="stringliteral">&quot;-\tInc: &quot;</span> + std::to_string(f-&gt;ifc-&gt;readInc())</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                          + <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        <a class="code" href="classexseis_1_1Flow_1_1Set.html#a5b52ce04333a5b8af6ec1c1b31ee846a">piol</a>-&gt;log-&gt;record(</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;          <span class="stringliteral">&quot;&quot;</span>, Logger::Layer::Set, Logger::Status::Request, msg,</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;          PIOL_VERBOSITY_NONE);</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    }</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classexseis_1_1Flow_1_1Set.html#ab9472ef15983375110b9fce89c38e013">rank</a> == 0) {</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; m : <a class="code" href="classexseis_1_1Flow_1_1Set.html#acc4506a2b1148d77e698c5bcb7d3d2ed">fmap</a>) {</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            <a class="code" href="classexseis_1_1Flow_1_1Set.html#a5b52ce04333a5b8af6ec1c1b31ee846a">piol</a>-&gt;log-&gt;record(</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;              <span class="stringliteral">&quot;&quot;</span>, Logger::Layer::Set, Logger::Status::Request,</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;              <span class="stringliteral">&quot;Local File count for (&quot;</span> + std::to_string(m.first.first) + <span class="stringliteral">&quot; nt, &quot;</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                + std::to_string(m.first.second)</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                + <span class="stringliteral">&quot; inc) = &quot;</span> + std::to_string(m.second.size()),</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;              PIOL_VERBOSITY_NONE);</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        }</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        <a class="code" href="classexseis_1_1Flow_1_1Set.html#a5b52ce04333a5b8af6ec1c1b31ee846a">piol</a>-&gt;log-&gt;procLog();</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    }</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;}</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">// TODO: Gather to Single is fine, Single to Gather is not</span></div>
<div class="line"><a name="l00140"></a><span class="lineno"><a class="line" href="classexseis_1_1Flow_1_1Set.html#ae63dc2fab766eab7a6d2209ea34f3703">  140</a></span>&#160;std::unique_ptr&lt;TraceBlock&gt; <a class="code" href="classexseis_1_1Flow_1_1Set.html#af2792608f724628070978d52d09d4993">Set::calcFunc</a>(</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  FuncLst::iterator fCurr,</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <span class="keyword">const</span> FuncLst::iterator fEnd,</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <a class="code" href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319ab">FuncOpt</a> type,</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  std::unique_ptr&lt;TraceBlock&gt; bIn)</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;{</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keywordflow">if</span> (fCurr == fEnd || !(*fCurr)-&gt;opt.check(type)) {</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        <span class="keywordflow">return</span> bIn;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    }</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="keywordflow">switch</span> (type) {</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319abaad22c799930d644e8468fe44c0312d53">FuncOpt::Gather</a>:</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;            <span class="keywordflow">if</span> ((*fCurr)-&gt;opt.check(<a class="code" href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319abaad22c799930d644e8468fe44c0312d53">FuncOpt::Gather</a>)) {</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;                <span class="keyword">auto</span> bOut = std::make_unique&lt;TraceBlock&gt;();</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                <span class="keyword">dynamic_cast&lt;</span><a class="code" href="structexseis_1_1Flow_1_1Op.html">Op&lt;Mod&gt;</a>*<span class="keyword">&gt;</span>(fCurr-&gt;get())</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                  -&gt;<a class="code" href="classexseis_1_1Flow_1_1Set.html#afc31bd4caaed6a9b4dad64c613253ff1">func</a>(bIn.get(), bOut.get());</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                bIn = std::move(bOut);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            }</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;            ++fCurr;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;            <span class="comment">// fallthrough</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319abaff12fbc3400acf905eee22b074704bd3">FuncOpt::SingleTrace</a>:</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;            <span class="keywordflow">if</span> ((*fCurr)-&gt;opt.check(<a class="code" href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319abaff12fbc3400acf905eee22b074704bd3">FuncOpt::SingleTrace</a>)) {</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                type = <a class="code" href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319abaff12fbc3400acf905eee22b074704bd3">FuncOpt::SingleTrace</a>;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                <span class="keyword">dynamic_cast&lt;</span><a class="code" href="structexseis_1_1Flow_1_1Op.html">Op&lt;InPlaceMod&gt;</a>*<span class="keyword">&gt;</span>(fCurr-&gt;get())-&gt;<a class="code" href="classexseis_1_1Flow_1_1Set.html#afc31bd4caaed6a9b4dad64c613253ff1">func</a>(bIn.get());</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;            }</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    }</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classexseis_1_1Flow_1_1Set.html#af2792608f724628070978d52d09d4993">calcFunc</a>(++fCurr, fEnd, type, std::move(bIn));</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;}</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div>
<div class="line"><a name="l00171"></a><span class="lineno"><a class="line" href="classexseis_1_1Flow_1_1Set.html#abdd80913edcf7d89fe265f470338aac3">  171</a></span>&#160;std::vector&lt;std::string&gt; <a class="code" href="classexseis_1_1Flow_1_1Set.html#abdd80913edcf7d89fe265f470338aac3">Set::startSingle</a>(</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  FuncLst::iterator fCurr, <span class="keyword">const</span> FuncLst::iterator fEnd)</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;{</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    std::vector&lt;std::string&gt; names;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; o : <a class="code" href="classexseis_1_1Flow_1_1Set.html#acc4506a2b1148d77e698c5bcb7d3d2ed">fmap</a>) {</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        <span class="keyword">auto</span>&amp; fQue = o.second;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        std::string name;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        <span class="keywordflow">if</span> (fQue.empty()) {</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;            <span class="keywordflow">return</span> std::vector&lt;std::string&gt;{};</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        }</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        <span class="keywordtype">size_t</span> ns                         = fQue[0]-&gt;ifc-&gt;readNs();</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        <a class="code" href="namespaceexseis_1_1utils_1_1typedefs.html#ab5b5063f7f6145715cf319bb08430bbd">exseis::utils::Floating_point</a> inc = fQue[0]-&gt;ifc-&gt;readInc();</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        <span class="keywordflow">if</span> (fQue.size() == 1) {</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;            name = <a class="code" href="classexseis_1_1Flow_1_1Set.html#a530bb61158d2c999faf0d290b3758cc8">outfix</a> + <span class="stringliteral">&quot;.segy&quot;</span>;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        }</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;            name =</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;              <a class="code" href="classexseis_1_1Flow_1_1Set.html#a530bb61158d2c999faf0d290b3758cc8">outfix</a> + std::to_string(ns) + <span class="stringliteral">&quot;_&quot;</span> + std::to_string(inc) + <span class="stringliteral">&quot;.segy&quot;</span>;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        }</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        names.push_back(name);</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        std::unique_ptr&lt;WriteInterface&gt; out = makeFile&lt;WriteSEGY&gt;(<a class="code" href="classexseis_1_1Flow_1_1Set.html#a5b52ce04333a5b8af6ec1c1b31ee846a">piol</a>, name);</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        <span class="comment">// TODO: Will need to delay ns call depending for operations that modify</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        <span class="comment">//       the number of samples per trace</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        out-&gt;writeNs(ns);</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        out-&gt;writeInc(inc);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        out-&gt;writeText(<a class="code" href="classexseis_1_1Flow_1_1Set.html#aa97113d10c048fce74f34ffad50cf576">outmsg</a>);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">size_t</span> memlim = 1024LU * 1024LU * 1024LU;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        <span class="keywordtype">size_t</span> max =</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;          memlim</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;          / (5LU * <span class="keyword">sizeof</span>(size_t) + SEGY_utils::getDOSz(ns)</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;             + 2LU * <a class="code" href="classexseis_1_1Flow_1_1Set.html#a1cb3f7abd880e38ece99eeafb3a2c3ab">rule</a>-&gt;paramMem() + 2LU * SEGY_utils::getDFSz(ns));</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; f : fQue) {</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            <a class="code" href="classexseis_1_1PIOL_1_1ReadInterface.html">ReadInterface</a>* in = f-&gt;ifc.get();</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            <span class="keywordtype">size_t</span> lnt        = f-&gt;ilst.size();</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            <span class="keywordtype">size_t</span> ns         = in-&gt;<a class="code" href="classexseis_1_1PIOL_1_1ReadInterface.html#ae927839306eb544ba2d13236d79b95c2">readNs</a>();</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            <span class="comment">// Initialise the blocks</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            <span class="keyword">auto</span> biggest = piol-&gt;comm-&gt;max(lnt);</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            <span class="keywordtype">size_t</span> extra = biggest / max</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                           + <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(biggest % max &gt; 0)</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                           - (lnt / max + static_cast&lt;size_t&gt;(lnt % max &gt; 0));</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; lnt; i += max) {</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                <span class="keywordtype">size_t</span> rblock = (i + max &lt; lnt ? max : lnt - i);</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                std::vector&lt;exseis::utils::Trace_value&gt; trc(rblock * ns);</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                <a class="code" href="structexseis_1_1PIOL_1_1Param.html">Param</a> prm(<a class="code" href="classexseis_1_1Flow_1_1Set.html#a1cb3f7abd880e38ece99eeafb3a2c3ab">rule</a>, rblock);</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                in-&gt;<a class="code" href="classexseis_1_1PIOL_1_1ReadInterface.html#a316589ca71e7607b65f916c24b8a0f93">readTraceNonContiguous</a>(</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                  rblock, f-&gt;ilst.data() + i, trc.data(), &amp;prm);</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                std::vector&lt;size_t&gt; sortlist =</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                  <a class="code" href="namespaceexseis_1_1PIOL.html#aa02615e11b733881b6dd91aaa50df9ec">getSortIndex</a>(rblock, f-&gt;olst.data() + i);</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                <span class="keyword">auto</span> bIn = std::make_unique&lt;TraceBlock&gt;();</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                bIn-&gt;prm.reset(<span class="keyword">new</span> <a class="code" href="structexseis_1_1PIOL_1_1Param.html">Param</a>(<a class="code" href="classexseis_1_1Flow_1_1Set.html#a1cb3f7abd880e38ece99eeafb3a2c3ab">rule</a>, rblock));</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                bIn-&gt;trc.resize(rblock * ns);</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                bIn-&gt;ns  = ns;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                bIn-&gt;inc = inc;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> j = 0LU; j &lt; rblock; j++) {</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                    param_utils::cpyPrm(sortlist[j], &amp;prm, j, bIn-&gt;prm.get());</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> k = 0LU; k &lt; ns; k++) {</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                        bIn-&gt;trc[j * ns + k] = trc[sortlist[j] * ns + k];</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                    }</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                    sortlist[j] = f-&gt;olst[i + sortlist[j]];</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                }</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                <span class="keyword">auto</span> bFinal =</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                  <a class="code" href="classexseis_1_1Flow_1_1Set.html#af2792608f724628070978d52d09d4993">calcFunc</a>(fCurr, fEnd, <a class="code" href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319abaff12fbc3400acf905eee22b074704bd3">FuncOpt::SingleTrace</a>, std::move(bIn));</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                out-&gt;writeTraceNonContiguous(</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                  rblock, sortlist.data(), bFinal-&gt;trc.data(),</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                  bFinal-&gt;prm.get());</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;            }</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; extra; i++) {</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                in-&gt;<a class="code" href="classexseis_1_1PIOL_1_1ReadInterface.html#a316589ca71e7607b65f916c24b8a0f93">readTraceNonContiguous</a>(0, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                <span class="keyword">auto</span> bIn = std::make_unique&lt;TraceBlock&gt;();</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                bIn-&gt;prm.reset(<span class="keyword">new</span> <a class="code" href="structexseis_1_1PIOL_1_1Param.html">Param</a>(<a class="code" href="classexseis_1_1Flow_1_1Set.html#a1cb3f7abd880e38ece99eeafb3a2c3ab">rule</a>, 0LU));</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                bIn-&gt;trc.resize(0LU);</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;                bIn-&gt;ns  = f-&gt;ifc-&gt;readNs();</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                bIn-&gt;nt  = 0LU;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                bIn-&gt;inc = f-&gt;ifc-&gt;readInc();</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                <a class="code" href="classexseis_1_1Flow_1_1Set.html#af2792608f724628070978d52d09d4993">calcFunc</a>(fCurr, fEnd, <a class="code" href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319abaad22c799930d644e8468fe44c0312d53">FuncOpt::Gather</a>, std::move(bIn));</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;                out-&gt;writeTraceNonContiguous(0, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;            }</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        }</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    }</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keywordflow">return</span> names;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;}</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div>
<div class="line"><a name="l00270"></a><span class="lineno"><a class="line" href="classexseis_1_1Flow_1_1Set.html#a23600e7a3faca4c51aaf349e46003387">  270</a></span>&#160;std::string <a class="code" href="classexseis_1_1Flow_1_1Set.html#a23600e7a3faca4c51aaf349e46003387">Set::startGather</a>(</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  FuncLst::iterator fCurr, <span class="keyword">const</span> FuncLst::iterator fEnd)</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;{</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classexseis_1_1Flow_1_1Set.html#a43254c7db9128d6cd1ef553b8bc175f1">file</a>.size() &gt; 1LU) {</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        <a class="code" href="classexseis_1_1Flow_1_1OpOpt.html">OpOpt</a> opt = {<a class="code" href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319abad1ec4debd970952ee50cf99c4dac82d5">FuncOpt::NeedMeta</a>, <a class="code" href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319abab4708d9c83eaf58f083050f2ec6854be">FuncOpt::NeedTrcVal</a>,</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;                     <a class="code" href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319abaff12fbc3400acf905eee22b074704bd3">FuncOpt::SingleTrace</a>};</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        <a class="code" href="classexseis_1_1Flow_1_1Set.html#ad059fa8f43f989a01b7713a589d8b3ec">FuncLst</a> tFunc;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        tFunc.push_back(std::make_shared&lt;<a class="code" href="structexseis_1_1Flow_1_1Op.html">Op&lt;InPlaceMod&gt;</a>&gt;(</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;          opt, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, [](<a class="code" href="structexseis_1_1Flow_1_1TraceBlock.html">TraceBlock</a>*) -&gt; std::vector&lt;size_t&gt; {</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;              <span class="keywordflow">return</span> std::vector&lt;size_t&gt;{};</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;          }));</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        std::string tOutfix            = <a class="code" href="classexseis_1_1Flow_1_1Set.html#a530bb61158d2c999faf0d290b3758cc8">outfix</a>;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        <a class="code" href="classexseis_1_1Flow_1_1Set.html#a530bb61158d2c999faf0d290b3758cc8">outfix</a>                         = <span class="stringliteral">&quot;temp&quot;</span>;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        std::vector&lt;std::string&gt; names = <a class="code" href="classexseis_1_1Flow_1_1Set.html#af2792608f724628070978d52d09d4993">calcFunc</a>(tFunc.begin(), tFunc.end());</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        <a class="code" href="classexseis_1_1Flow_1_1Set.html#a530bb61158d2c999faf0d290b3758cc8">outfix</a>                         = tOutfix;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        <a class="code" href="classexseis_1_1Flow_1_1Set.html#a198f055d3c4ce2eb9473fd61f015b6ae">drop</a>();</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        <span class="keywordflow">for</span> (std::string n : names) {</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;            <span class="comment">// TODO: Open with delete on close?</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;            <a class="code" href="classexseis_1_1Flow_1_1Set.html#aab1e5779be267c98d09ac2375ec2e2ac">add</a>(n);</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        }</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    }</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    std::string gname;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; o : <a class="code" href="classexseis_1_1Flow_1_1Set.html#a43254c7db9128d6cd1ef553b8bc175f1">file</a>) {</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        <span class="comment">// Locate gather boundaries.</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        <span class="keyword">auto</span> gather = <a class="code" href="namespaceexseis_1_1PIOL.html#a303887c34be91078488b0d64b694030a">getIlXlGathers</a>(<a class="code" href="classexseis_1_1Flow_1_1Set.html#a5b52ce04333a5b8af6ec1c1b31ee846a">piol</a>.get(), o-&gt;ifc.get());</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        <span class="keyword">auto</span> gdec   = <a class="code" href="namespaceexseis_1_1utils_1_1decomposition.html#a82dafa151b9e1c07265fb50c0ddfbc69">utils::block_decomposition</a>(gather.size(), <a class="code" href="classexseis_1_1Flow_1_1Set.html#a2e93309ef516832b37ab4f61eed06d61">numRank</a>, <a class="code" href="classexseis_1_1Flow_1_1Set.html#ab9472ef15983375110b9fce89c38e013">rank</a>);</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        <span class="keywordtype">size_t</span> numGather = gdec.<a class="code" href="structexseis_1_1utils_1_1decomposition_1_1exseis__Contiguous__decomposition.html#a2bacb6e74aaba4b3719051ac2626cd81">local_size</a>;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        std::vector&lt;size_t&gt; gNums;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span> fTemp = fCurr;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;             fTemp != fEnd &amp;&amp; (*fTemp)-&gt;opt.check(<a class="code" href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319abaad22c799930d644e8468fe44c0312d53">FuncOpt::Gather</a>); fTemp++) {</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;            <span class="keyword">auto</span>* p = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="structexseis_1_1Flow_1_1Op.html">Op&lt;Mod&gt;</a>*<span class="keyword">&gt;</span>(fTemp-&gt;get());</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;            assert(p);</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; numGather; i++) {</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                gNums.push_back(i * <a class="code" href="classexseis_1_1Flow_1_1Set.html#a2e93309ef516832b37ab4f61eed06d61">numRank</a> + <a class="code" href="classexseis_1_1Flow_1_1Set.html#ab9472ef15983375110b9fce89c38e013">rank</a>);</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;            }</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;            p-&gt;state-&gt;makeState(gNums, gather);</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        }</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        <span class="comment">// TODO: Loop and add rules</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        <span class="comment">// TODO: need better rule handling, create rule of all rules in gather</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        <span class="comment">//       functions</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        <span class="keyword">auto</span> <a class="code" href="classexseis_1_1Flow_1_1Set.html#a1cb3f7abd880e38ece99eeafb3a2c3ab">rule</a> = std::make_shared&lt;Rule&gt;(</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;          std::initializer_list&lt;Meta&gt;{<a class="code" href="Meta_8h.html#a06fc87d81c62e9abb8790b6e5713c55ba85ba03f9a8978665567fb0425807ef1d">PIOL_META_il</a>, <a class="code" href="Meta_8h.html#a06fc87d81c62e9abb8790b6e5713c55ba12e0204597332f4066e8bee91b1ba727">PIOL_META_xl</a>});</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        <span class="keyword">auto</span> fTemp = fCurr;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        <span class="keywordflow">while</span> (++fTemp != fEnd &amp;&amp; (*fTemp)-&gt;opt.check(<a class="code" href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319abaad22c799930d644e8468fe44c0312d53">FuncOpt::Gather</a>)) {</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        }</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        gname = (fTemp != fEnd ? <span class="stringliteral">&quot;gtemp.segy&quot;</span> : <a class="code" href="classexseis_1_1Flow_1_1Set.html#a530bb61158d2c999faf0d290b3758cc8">outfix</a> + <span class="stringliteral">&quot;.segy&quot;</span>);</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        <span class="comment">// Use inputs as default values. These can be changed later</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        std::unique_ptr&lt;WriteInterface&gt; out = makeFile&lt;WriteSEGY&gt;(<a class="code" href="classexseis_1_1Flow_1_1Set.html#a5b52ce04333a5b8af6ec1c1b31ee846a">piol</a>, gname);</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        <span class="keywordtype">size_t</span> wOffset = 0LU;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        <span class="keywordtype">size_t</span> iOffset = 0LU;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        <span class="keywordtype">size_t</span> extra   = piol-&gt;comm-&gt;max(numGather) - numGather;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        <span class="keywordtype">size_t</span> ig      = 0;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> gNum : gNums) {</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;            <span class="keyword">auto</span> gval         = gather[gNum];</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">size_t</span> iGSz = gval.num_traces;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;            <span class="comment">// Initialise the blocks</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;            <span class="keyword">auto</span> bIn = std::make_unique&lt;TraceBlock&gt;();</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;            bIn-&gt;prm.reset(<span class="keyword">new</span> <a class="code" href="structexseis_1_1PIOL_1_1Param.html">Param</a>(<a class="code" href="classexseis_1_1Flow_1_1Set.html#a1cb3f7abd880e38ece99eeafb3a2c3ab">rule</a>, iGSz));</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;            bIn-&gt;trc.resize(iGSz * o-&gt;ifc-&gt;readNs());</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;            bIn-&gt;ns   = o-&gt;ifc-&gt;readNs();</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;            bIn-&gt;nt   = o-&gt;ifc-&gt;readNt();</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;            bIn-&gt;inc  = o-&gt;ifc-&gt;readInc();</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;            bIn-&gt;numG = numGather;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;            bIn-&gt;gNum = ig++;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;            <span class="keywordtype">size_t</span> ioff = piol-&gt;comm-&gt;offset(iGSz);</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;            o-&gt;ifc-&gt;readTrace(</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;              iOffset + ioff, bIn-&gt;prm-&gt;size(), bIn-&gt;trc.data(),</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;              bIn-&gt;prm.get());</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;            iOffset += piol-&gt;comm-&gt;sum(iGSz);</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;            <span class="keyword">auto</span> bOut = <a class="code" href="classexseis_1_1Flow_1_1Set.html#af2792608f724628070978d52d09d4993">calcFunc</a>(fCurr, fEnd, <a class="code" href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319abaad22c799930d644e8468fe44c0312d53">FuncOpt::Gather</a>, std::move(bIn));</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;            <span class="keywordtype">size_t</span> woff = piol-&gt;comm-&gt;offset(bOut-&gt;prm-&gt;size());</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;            <span class="comment">// For simplicity, the output is now</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;            out-&gt;writeNs(bOut-&gt;ns);</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;            out-&gt;writeInc(bOut-&gt;inc);</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;            out-&gt;writeTrace(</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;              wOffset + woff, bOut-&gt;prm-&gt;size(),</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;              (bOut-&gt;prm-&gt;size() != 0 ? bOut-&gt;trc.data() : <span class="keyword">nullptr</span>),</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;              bOut-&gt;prm.get());</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;            wOffset += piol-&gt;comm-&gt;sum(bOut-&gt;prm-&gt;size());</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        }</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; extra; i++) {</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;            piol-&gt;comm-&gt;offset(0LU);</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;            o-&gt;ifc-&gt;readTrace(<span class="keywordtype">size_t</span>(0), <span class="keywordtype">size_t</span>(0), <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;            piol-&gt;comm-&gt;sum(0LU);</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;            <span class="keyword">auto</span> bIn = std::make_unique&lt;TraceBlock&gt;();</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;            bIn-&gt;prm.reset(<span class="keyword">new</span> <a class="code" href="structexseis_1_1PIOL_1_1Param.html">Param</a>(<a class="code" href="classexseis_1_1Flow_1_1Set.html#a1cb3f7abd880e38ece99eeafb3a2c3ab">rule</a>, 0LU));</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;            bIn-&gt;trc.resize(0LU);</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;            bIn-&gt;ns  = o-&gt;ifc-&gt;readNs();</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;            bIn-&gt;nt  = o-&gt;ifc-&gt;readNt();</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;            bIn-&gt;inc = o-&gt;ifc-&gt;readInc();</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;            <span class="keyword">auto</span> bOut = <a class="code" href="classexseis_1_1Flow_1_1Set.html#af2792608f724628070978d52d09d4993">calcFunc</a>(fCurr, fEnd, <a class="code" href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319abaad22c799930d644e8468fe44c0312d53">FuncOpt::Gather</a>, std::move(bIn));</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;            out-&gt;writeNs(bOut-&gt;ns);</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;            out-&gt;writeInc(bOut-&gt;inc);</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;            piol-&gt;comm-&gt;offset(0LU);</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;            out-&gt;writeTrace(<span class="keywordtype">size_t</span>(0), <span class="keywordtype">size_t</span>(0), <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;            piol-&gt;comm-&gt;sum(0LU);</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        }</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    }</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <span class="keywordflow">while</span> (++fCurr != fEnd &amp;&amp; (*fCurr)-&gt;opt.check(<a class="code" href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319abaad22c799930d644e8468fe44c0312d53">FuncOpt::Gather</a>)) {</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    }</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="keywordflow">if</span> (fCurr != fEnd) {</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        <a class="code" href="classexseis_1_1Flow_1_1Set.html#a198f055d3c4ce2eb9473fd61f015b6ae">drop</a>();</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        <a class="code" href="classexseis_1_1Flow_1_1Set.html#aab1e5779be267c98d09ac2375ec2e2ac">add</a>(gname);</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    }</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        <span class="keywordflow">return</span> gname;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    }</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;}</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="comment">// calc for subsets only</span></div>
<div class="line"><a name="l00401"></a><span class="lineno"><a class="line" href="classexseis_1_1Flow_1_1Set.html#a900640beb3531127c3b75c023e8206b4">  401</a></span>&#160;Set::FuncLst::iterator <a class="code" href="classexseis_1_1Flow_1_1Set.html#a900640beb3531127c3b75c023e8206b4">Set::calcFuncS</a>(</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  FuncLst::iterator fCurr, <span class="keyword">const</span> FuncLst::iterator fEnd, <a class="code" href="classexseis_1_1Flow_1_1Set.html#a4caa9335891459549ac8e5e9d527395d">FileDeque</a>&amp; fQue)</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;{</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    std::shared_ptr&lt;TraceBlock&gt; block;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="keywordflow">if</span> ((*fCurr)-&gt;opt.check(<a class="code" href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319abad1ec4debd970952ee50cf99c4dac82d5">FuncOpt::NeedMeta</a>)) {</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        <span class="keywordflow">if</span> (!(*fCurr)-&gt;opt.check(<a class="code" href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319abab4708d9c83eaf58f083050f2ec6854be">FuncOpt::NeedTrcVal</a>)) {</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;            block = <a class="code" href="classexseis_1_1Flow_1_1Set.html#a28b76307c3b7531fe44d786736db0d57">cache</a>.<a class="code" href="classexseis_1_1Flow_1_1Cache.html#a62861a343a4538202be0c60e62a3b584">cachePrm</a>((*fCurr)-&gt;rule, fQue);</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        }</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;            std::cerr &lt;&lt; <span class="stringliteral">&quot;Not implemented both trace + parameters yet\n&quot;</span>;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        }</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    }</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((*fCurr)-&gt;opt.check(<a class="code" href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319abab4708d9c83eaf58f083050f2ec6854be">FuncOpt::NeedTrcVal</a>)) {</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        block = <a class="code" href="classexseis_1_1Flow_1_1Set.html#a28b76307c3b7531fe44d786736db0d57">cache</a>.<a class="code" href="classexseis_1_1Flow_1_1Cache.html#aea547d75d7879b2a9f0dcb67a9400df5">cacheTrc</a>(fQue);</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    }</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <span class="comment">// The operation call</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    std::vector&lt;size_t&gt; trlist =</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;      <span class="keyword">dynamic_cast&lt;</span><a class="code" href="structexseis_1_1Flow_1_1Op.html">Op&lt;InPlaceMod&gt;</a>*<span class="keyword">&gt;</span>(fCurr-&gt;get())-&gt;<a class="code" href="classexseis_1_1Flow_1_1Set.html#afc31bd4caaed6a9b4dad64c613253ff1">func</a>(block.get());</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="keywordtype">size_t</span> j = 0;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; f : fQue) {</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        std::copy(&amp;trlist[j], &amp;trlist[j + f-&gt;olst.size()], f-&gt;olst.begin());</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        j += f-&gt;olst.size();</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    }</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="keywordflow">if</span> (++fCurr != fEnd) {</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        <span class="keywordflow">if</span> ((*fCurr)-&gt;opt.check(<a class="code" href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319aba6e74f27bf65a67a7e2238eb32d1df2b0">FuncOpt::SubSetOnly</a>)) {</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classexseis_1_1Flow_1_1Set.html#a900640beb3531127c3b75c023e8206b4">calcFuncS</a>(fCurr, fEnd, fQue);</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        }</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    }</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="keywordflow">return</span> fCurr;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;}</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;</div>
<div class="line"><a name="l00436"></a><span class="lineno"><a class="line" href="classexseis_1_1Flow_1_1Set.html#a8c0f571437bc79006387986c23efad46">  436</a></span>&#160;Set::FuncLst::iterator <a class="code" href="classexseis_1_1Flow_1_1Set.html#a8c0f571437bc79006387986c23efad46">Set::startSubset</a>(</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  FuncLst::iterator fCurr, <span class="keyword">const</span> FuncLst::iterator fEnd)</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;{</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    std::vector&lt;FuncLst::iterator&gt; flist;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <span class="comment">// TODO: Parallelisable</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; o : <a class="code" href="classexseis_1_1Flow_1_1Set.html#acc4506a2b1148d77e698c5bcb7d3d2ed">fmap</a>) {</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        <span class="comment">// Iterate across the full function list</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        flist.push_back(<a class="code" href="classexseis_1_1Flow_1_1Set.html#a900640beb3531127c3b75c023e8206b4">calcFuncS</a>(fCurr, fEnd, o.second));</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    }</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    assert(std::equal(flist.begin() + 1LU, flist.end(), flist.begin()));</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <span class="keywordflow">return</span> flist.front();</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;}</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;</div>
<div class="line"><a name="l00452"></a><span class="lineno"><a class="line" href="classexseis_1_1Flow_1_1Set.html#af2792608f724628070978d52d09d4993">  452</a></span>&#160;std::vector&lt;std::string&gt; <a class="code" href="classexseis_1_1Flow_1_1Set.html#af2792608f724628070978d52d09d4993">Set::calcFunc</a>(</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  FuncLst::iterator fCurr, <span class="keyword">const</span> FuncLst::iterator fEnd)</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;{</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="keywordflow">if</span> (fCurr != fEnd) {</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        <span class="keywordflow">if</span> ((*fCurr)-&gt;opt.check(<a class="code" href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319aba6e74f27bf65a67a7e2238eb32d1df2b0">FuncOpt::SubSetOnly</a>)) {</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;            fCurr = <a class="code" href="classexseis_1_1Flow_1_1Set.html#a8c0f571437bc79006387986c23efad46">startSubset</a>(fCurr, fEnd);</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        }</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((*fCurr)-&gt;opt.check(<a class="code" href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319abaad22c799930d644e8468fe44c0312d53">FuncOpt::Gather</a>)) {</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;            std::string gname = <a class="code" href="classexseis_1_1Flow_1_1Set.html#a23600e7a3faca4c51aaf349e46003387">startGather</a>(fCurr, fEnd);</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;            <span class="comment">// If startGather returned an empty string, then fCurr == fEnd was</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;            <span class="comment">// reached.</span></div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;            <span class="keywordflow">if</span> (!gname.empty()) {</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                <span class="keywordflow">return</span> std::vector&lt;std::string&gt;{gname};</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;            }</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;            <span class="comment">// Skip fCurr where check(FuncOpt::Gather) is ok</span></div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;            <span class="keywordflow">for</span> (; fCurr != fEnd; ++fCurr) {</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;                <span class="keywordflow">if</span> (!(*fCurr)-&gt;opt.check(<a class="code" href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319abaad22c799930d644e8468fe44c0312d53">FuncOpt::Gather</a>)) {</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                }</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;            }</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        }</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((*fCurr)-&gt;opt.check(<a class="code" href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319abaff12fbc3400acf905eee22b074704bd3">FuncOpt::SingleTrace</a>)) {</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;            std::vector&lt;std::string&gt; sname = <a class="code" href="classexseis_1_1Flow_1_1Set.html#abdd80913edcf7d89fe265f470338aac3">startSingle</a>(fCurr, fEnd);</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;            <span class="keywordflow">if</span> (!sname.empty()) {</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;                <span class="keywordflow">return</span> sname;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;            }</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;            <span class="keywordflow">for</span> (; fCurr != fEnd; ++fCurr) {</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;                <span class="keywordflow">if</span> (!(*fCurr)-&gt;opt.check(<a class="code" href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319abaff12fbc3400acf905eee22b074704bd3">FuncOpt::SingleTrace</a>)) {</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;                }</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;            }</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        }</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;            std::cerr</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;              &lt;&lt; <span class="stringliteral">&quot;Error, not supported yet. TODO: Implement support for a truly global operation.\n&quot;</span>;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;            ++fCurr;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        }</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        <a class="code" href="classexseis_1_1Flow_1_1Set.html#af2792608f724628070978d52d09d4993">calcFunc</a>(fCurr, fEnd);</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    }</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <span class="keywordflow">return</span> std::vector&lt;std::string&gt;{};</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;}</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;</div>
<div class="line"><a name="l00502"></a><span class="lineno"><a class="line" href="classexseis_1_1Flow_1_1Set.html#a16775d9b078ad31adc28f10f8349e6f3">  502</a></span>&#160;std::vector&lt;std::string&gt; <a class="code" href="classexseis_1_1Flow_1_1Set.html#a16775d9b078ad31adc28f10f8349e6f3">Set::output</a>(std::string oname)</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;{</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <a class="code" href="classexseis_1_1Flow_1_1OpOpt.html">OpOpt</a> opt = {<a class="code" href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319abad1ec4debd970952ee50cf99c4dac82d5">FuncOpt::NeedMeta</a>, <a class="code" href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319abab4708d9c83eaf58f083050f2ec6854be">FuncOpt::NeedTrcVal</a>, <a class="code" href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319abaff12fbc3400acf905eee22b074704bd3">FuncOpt::SingleTrace</a>};</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <a class="code" href="classexseis_1_1Flow_1_1Set.html#afc31bd4caaed6a9b4dad64c613253ff1">func</a>.emplace_back(std::make_shared&lt;<a class="code" href="structexseis_1_1Flow_1_1Op.html">Op&lt;InPlaceMod&gt;</a>&gt;(</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;      opt, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, [](<a class="code" href="structexseis_1_1Flow_1_1TraceBlock.html">TraceBlock</a>*) -&gt; std::vector&lt;size_t&gt; {</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;          <span class="keywordflow">return</span> std::vector&lt;size_t&gt;{};</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;      }));</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <a class="code" href="classexseis_1_1Flow_1_1Set.html#a530bb61158d2c999faf0d290b3758cc8">outfix</a>                       = oname;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    std::vector&lt;std::string&gt; out = <a class="code" href="classexseis_1_1Flow_1_1Set.html#af2792608f724628070978d52d09d4993">calcFunc</a>(<a class="code" href="classexseis_1_1Flow_1_1Set.html#afc31bd4caaed6a9b4dad64c613253ff1">func</a>.begin(), <a class="code" href="classexseis_1_1Flow_1_1Set.html#afc31bd4caaed6a9b4dad64c613253ff1">func</a>.end());</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <a class="code" href="classexseis_1_1Flow_1_1Set.html#afc31bd4caaed6a9b4dad64c613253ff1">func</a>.clear();</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <span class="keywordflow">return</span> out;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;}</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;</div>
<div class="line"><a name="l00517"></a><span class="lineno"><a class="line" href="classexseis_1_1Flow_1_1Set.html#a71cfc89c0e09e0aa4ca4456111ea3609">  517</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classexseis_1_1Flow_1_1Set.html#a71cfc89c0e09e0aa4ca4456111ea3609">Set::getMinMax</a>(</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  <a class="code" href="namespaceexseis_1_1PIOL.html#ad7ae8666ebcb33384798d663719c1217">MinMaxFunc&lt;Param&gt;</a> xlam, <a class="code" href="namespaceexseis_1_1PIOL.html#ad7ae8666ebcb33384798d663719c1217">MinMaxFunc&lt;Param&gt;</a> ylam, <a class="code" href="structPIOL__CoordElem.html">CoordElem</a>* minmax)</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;{</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <span class="comment">// TODO: This needs to be changed to be compatible with ExSeisFlow</span></div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    minmax[0].<a class="code" href="structPIOL__CoordElem.html#a1b263b0e48ed5843706bfa765a0d637e">val</a> = std::numeric_limits&lt;exseis::utils::Floating_point&gt;::max();</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    minmax[1].<a class="code" href="structPIOL__CoordElem.html#a1b263b0e48ed5843706bfa765a0d637e">val</a> = std::numeric_limits&lt;exseis::utils::Floating_point&gt;::min();</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    minmax[2].<a class="code" href="structPIOL__CoordElem.html#a1b263b0e48ed5843706bfa765a0d637e">val</a> = std::numeric_limits&lt;exseis::utils::Floating_point&gt;::max();</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    minmax[3].<a class="code" href="structPIOL__CoordElem.html#a1b263b0e48ed5843706bfa765a0d637e">val</a> = std::numeric_limits&lt;exseis::utils::Floating_point&gt;::min();</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; 4; i++) {</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        minmax[i].<a class="code" href="structPIOL__CoordElem.html#aaf24816dd37848b0c3895c4bbda88373">num</a> = std::numeric_limits&lt;size_t&gt;::max();</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    }</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    <a class="code" href="structPIOL__CoordElem.html">CoordElem</a> tminmax[4LU];</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; f : <a class="code" href="classexseis_1_1Flow_1_1Set.html#a43254c7db9128d6cd1ef553b8bc175f1">file</a>) {</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;        std::vector&lt;Param&gt; vprm;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        <a class="code" href="structexseis_1_1PIOL_1_1Param.html">Param</a> prm(<a class="code" href="classexseis_1_1Flow_1_1Set.html#a1cb3f7abd880e38ece99eeafb3a2c3ab">rule</a>, f-&gt;ilst.size());</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        f-&gt;ifc-&gt;readParamNonContiguous(f-&gt;ilst.size(), f-&gt;ilst.data(), &amp;prm);</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; f-&gt;ilst.size(); i++) {</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;            vprm.emplace_back(<a class="code" href="classexseis_1_1Flow_1_1Set.html#a1cb3f7abd880e38ece99eeafb3a2c3ab">rule</a>, 1LU);</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;            param_utils::cpyPrm(i, &amp;prm, 0, &amp;vprm.back());</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;        }</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;        <span class="comment">// TODO: Minmax can&#39;t assume ordered data! Fix this!</span></div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        <span class="keywordtype">size_t</span> offset = <a class="code" href="classexseis_1_1Flow_1_1Set.html#a5b52ce04333a5b8af6ec1c1b31ee846a">piol</a>-&gt;comm-&gt;offset(f-&gt;ilst.size());</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;        <a class="code" href="namespaceexseis_1_1PIOL.html#a47c7c1740710f1e899437ba2c4a98339">PIOL::getMinMax</a>(</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;          <a class="code" href="classexseis_1_1Flow_1_1Set.html#a5b52ce04333a5b8af6ec1c1b31ee846a">piol</a>.get(), offset, f-&gt;ilst.size(), vprm.data(), xlam, ylam, tminmax);</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0LU; i &lt; 2LU; i++) {</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;            {</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;                <span class="keyword">auto</span>&amp; tmm = tminmax[2LU * i];</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;                <span class="keyword">auto</span>&amp; mm  = minmax[2LU * i];</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;                <span class="keywordflow">if</span> (tmm.val == mm.val) {</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;                    mm.<a class="code" href="structPIOL__CoordElem.html#aaf24816dd37848b0c3895c4bbda88373">num</a> = std::min(tmm.num, mm.num);</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                }</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tmm.val &lt; mm.val) {</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;                    mm = tmm;</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;                }</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;            }</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;            {</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;                <span class="keyword">auto</span>&amp; tmm2 = tminmax[2LU * i + 1LU];</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;                <span class="keyword">auto</span>&amp; mm2  = minmax[2LU * i + 1LU];</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;                <span class="keywordflow">if</span> (tmm2.val == mm2.val) {</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;                    mm2.<a class="code" href="structPIOL__CoordElem.html#aaf24816dd37848b0c3895c4bbda88373">num</a> = std::min(tmm2.num, mm2.num);</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;                }</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tmm2.val &gt; mm2.val) {</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;                    mm2 = tmm2;</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;                }</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;            }</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        }</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    }</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;}</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;</div>
<div class="line"><a name="l00572"></a><span class="lineno"><a class="line" href="classexseis_1_1Flow_1_1Set.html#a3695d248db2c3434819a5f57725af932">  572</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classexseis_1_1Flow_1_1Set.html#a3695d248db2c3434819a5f57725af932">Set::sort</a>(<a class="code" href="namespaceexseis_1_1PIOL.html#a8c213c1ddcaa64ed381efb27822d4c68">CompareP</a> sortFunc)</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;{</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <span class="keyword">auto</span> r = std::make_shared&lt;Rule&gt;(std::initializer_list&lt;Meta&gt;{</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;      <a class="code" href="Meta_8h.html#a06fc87d81c62e9abb8790b6e5713c55ba85ba03f9a8978665567fb0425807ef1d">PIOL_META_il</a>, <a class="code" href="Meta_8h.html#a06fc87d81c62e9abb8790b6e5713c55ba12e0204597332f4066e8bee91b1ba727">PIOL_META_xl</a>, <a class="code" href="Meta_8h.html#a06fc87d81c62e9abb8790b6e5713c55ba9e6ea6fb4da8bcba178414666819cd04">PIOL_META_xSrc</a>, <a class="code" href="Meta_8h.html#a06fc87d81c62e9abb8790b6e5713c55baee42d285457ad3c6e3bd25706ab90718">PIOL_META_ySrc</a>,</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;      <a class="code" href="Meta_8h.html#a06fc87d81c62e9abb8790b6e5713c55bab66a619a80301fe7107c9003de51913c">PIOL_META_xRcv</a>, <a class="code" href="Meta_8h.html#a06fc87d81c62e9abb8790b6e5713c55ba0fbfb9477d30ba6d7a8c9de0c3cb7fa0">PIOL_META_yRcv</a>, <a class="code" href="Meta_8h.html#a06fc87d81c62e9abb8790b6e5713c55ba28af5782759644d846cc502b36b3b254">PIOL_META_xCmp</a>, <a class="code" href="Meta_8h.html#a06fc87d81c62e9abb8790b6e5713c55ba9c7734c7c9a0075f84ebd39e08dfbea4">PIOL_META_yCmp</a>,</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;      <a class="code" href="Meta_8h.html#a06fc87d81c62e9abb8790b6e5713c55ba6bb6438737e09d618ae4e6ac7623a4fd">PIOL_META_Offset</a>, <a class="code" href="Meta_8h.html#a06fc87d81c62e9abb8790b6e5713c55ba4ff1058d9961bfc317053d5432a368a8">PIOL_META_WtrDepRcv</a>, <a class="code" href="Meta_8h.html#a06fc87d81c62e9abb8790b6e5713c55babc95402b3493f1011557da2c10c69f48">PIOL_META_tn</a>});</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <span class="comment">// TODO: This is not the ideal mechanism, hack for now. See the note in the</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <span class="comment">//       calcFunc for single traces</span></div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <a class="code" href="classexseis_1_1Flow_1_1Set.html#a1cb3f7abd880e38ece99eeafb3a2c3ab">rule</a>-&gt;addRule(*r);</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <a class="code" href="classexseis_1_1Flow_1_1Set.html#a3695d248db2c3434819a5f57725af932">sort</a>(r, sortFunc);</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;}</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;</div>
<div class="line"><a name="l00585"></a><span class="lineno"><a class="line" href="classexseis_1_1Flow_1_1Set.html#a91191c616e6c3231ff4c46e3cc81982c">  585</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classexseis_1_1Flow_1_1Set.html#a3695d248db2c3434819a5f57725af932">Set::sort</a>(std::shared_ptr&lt;Rule&gt; r, <a class="code" href="namespaceexseis_1_1PIOL.html#a8c213c1ddcaa64ed381efb27822d4c68">CompareP</a> sortFunc)</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;{</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <a class="code" href="classexseis_1_1Flow_1_1OpOpt.html">OpOpt</a> opt = {<a class="code" href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319abad1ec4debd970952ee50cf99c4dac82d5">FuncOpt::NeedMeta</a>, <a class="code" href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319aba7b59aca1d9729394302efc125afb53b4">FuncOpt::ModMetaVal</a>, <a class="code" href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319abaf6dfa34f37b50e8edb92f1ee150a799b">FuncOpt::DepMetaVal</a>,</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;                 <a class="code" href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319aba6e74f27bf65a67a7e2238eb32d1df2b0">FuncOpt::SubSetOnly</a>};</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <a class="code" href="classexseis_1_1Flow_1_1Set.html#afc31bd4caaed6a9b4dad64c613253ff1">func</a>.push_back(std::make_shared&lt;<a class="code" href="structexseis_1_1Flow_1_1Op.html">Op&lt;InPlaceMod&gt;</a>&gt;(</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;      opt, r, <span class="keyword">nullptr</span>, [<span class="keyword">this</span>, sortFunc](<a class="code" href="structexseis_1_1Flow_1_1TraceBlock.html">TraceBlock</a>* in) -&gt; std::vector&lt;size_t&gt; {</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;          <span class="comment">// TODO: It will eventually be necessary to support this use case.</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="classexseis_1_1Flow_1_1Set.html#a5b52ce04333a5b8af6ec1c1b31ee846a">piol</a>-&gt;comm-&gt;min(in-&gt;<a class="code" href="structexseis_1_1Flow_1_1TraceBlock.html#af5cca48f1aa88b5edb18fa069d9e435c">prm</a>-&gt;size()) &lt; 3LU) {</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;              <a class="code" href="classexseis_1_1Flow_1_1Set.html#a5b52ce04333a5b8af6ec1c1b31ee846a">piol</a>-&gt;log-&gt;record(</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;                <span class="stringliteral">&quot;&quot;</span>, Logger::Layer::Set, Logger::Status::Error,</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;                <span class="stringliteral">&quot;Email cathal@ichec.ie if you want to sort -very- small sets of files with multiple processes.&quot;</span>,</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;                PIOL_VERBOSITY_NONE);</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;              <span class="keywordflow">return</span> std::vector&lt;size_t&gt;{};</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;          }</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;          <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;              <span class="keywordflow">return</span> <a class="code" href="namespaceexseis_1_1PIOL.html#a6194400d36a1a5c9d26a8f6e6413a658">PIOL::sort</a>(<a class="code" href="classexseis_1_1Flow_1_1Set.html#a5b52ce04333a5b8af6ec1c1b31ee846a">piol</a>.get(), in-&gt;<a class="code" href="structexseis_1_1Flow_1_1TraceBlock.html#af5cca48f1aa88b5edb18fa069d9e435c">prm</a>.get(), sortFunc);</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;          }</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;      }));</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;}</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;</div>
<div class="line"><a name="l00606"></a><span class="lineno"><a class="line" href="classexseis_1_1Flow_1_1Set.html#a4c414ed902bc8827a8a3b5cb332782f0">  606</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classexseis_1_1Flow_1_1Set.html#a4c414ed902bc8827a8a3b5cb332782f0">Set::toAngle</a>(</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;  std::string vmName,</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">size_t</span> vBin,</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">size_t</span> oGSz,</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;  <a class="code" href="namespaceexseis_1_1utils_1_1typedefs.html#ab5b5063f7f6145715cf319bb08430bbd">exseis::utils::Floating_point</a> oInc)</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;{</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    <a class="code" href="classexseis_1_1Flow_1_1OpOpt.html">OpOpt</a> opt = {<a class="code" href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319abad1ec4debd970952ee50cf99c4dac82d5">FuncOpt::NeedMeta</a>,   <a class="code" href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319abab4708d9c83eaf58f083050f2ec6854be">FuncOpt::NeedTrcVal</a>, <a class="code" href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319aba102488466f580b28970d40e492a89783">FuncOpt::ModTrcVal</a>,</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;                 <a class="code" href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319aba7b59aca1d9729394302efc125afb53b4">FuncOpt::ModMetaVal</a>, <a class="code" href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319aba30ee788a8ff4119624377271436e3c82">FuncOpt::DepTrcVal</a>,  <a class="code" href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319abaa017fd0be156f03044876768971d158a">FuncOpt::DepTrcOrder</a>,</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                 <a class="code" href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319aba7076cb4bc47b8f7d628bc2a44d252734">FuncOpt::DepTrcCnt</a>,  <a class="code" href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319abaf6dfa34f37b50e8edb92f1ee150a799b">FuncOpt::DepMetaVal</a>, <a class="code" href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319abaad22c799930d644e8468fe44c0312d53">FuncOpt::Gather</a>};</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    <span class="keyword">auto</span> state =</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;      std::make_shared&lt;RadonGatherState&gt;(<a class="code" href="classexseis_1_1Flow_1_1Set.html#a5b52ce04333a5b8af6ec1c1b31ee846a">piol</a>, vmName, vBin, oGSz, oInc);</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <a class="code" href="classexseis_1_1Flow_1_1Set.html#afc31bd4caaed6a9b4dad64c613253ff1">func</a>.emplace_back(std::make_shared&lt;<a class="code" href="structexseis_1_1Flow_1_1Op.html">Op&lt;Mod&gt;</a>&gt;(</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;      opt, <a class="code" href="classexseis_1_1Flow_1_1Set.html#a1cb3f7abd880e38ece99eeafb3a2c3ab">rule</a>, state, [state](<span class="keyword">const</span> <a class="code" href="structexseis_1_1Flow_1_1TraceBlock.html">TraceBlock</a>* in, <a class="code" href="structexseis_1_1Flow_1_1TraceBlock.html">TraceBlock</a>* out) {</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;          <span class="keyword">const</span> <span class="keywordtype">size_t</span> iGSz = in-&gt;<a class="code" href="structexseis_1_1Flow_1_1TraceBlock.html#af5cca48f1aa88b5edb18fa069d9e435c">prm</a>-&gt;size();</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;          out-&gt;<a class="code" href="structexseis_1_1Flow_1_1TraceBlock.html#a943bec10b59c6672a1077285c902ba5e">ns</a>           = in-&gt;<a class="code" href="structexseis_1_1Flow_1_1TraceBlock.html#a943bec10b59c6672a1077285c902ba5e">ns</a>;</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;          out-&gt;<a class="code" href="structexseis_1_1Flow_1_1TraceBlock.html#a815be91bdc142565ed13ad73d4d825cf">inc</a>          = state-&gt;oInc;  <span class="comment">// 1 degree in radians</span></div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;          out-&gt;<a class="code" href="structexseis_1_1Flow_1_1TraceBlock.html#ad4c3e52b7efac31a6da4d512c3d132dd">trc</a>.resize(state-&gt;oGSz * out-&gt;<a class="code" href="structexseis_1_1Flow_1_1TraceBlock.html#a943bec10b59c6672a1077285c902ba5e">ns</a>);</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;          out-&gt;<a class="code" href="structexseis_1_1Flow_1_1TraceBlock.html#af5cca48f1aa88b5edb18fa069d9e435c">prm</a>.reset(<span class="keyword">new</span> <a class="code" href="structexseis_1_1PIOL_1_1Param.html">Param</a>(in-&gt;<a class="code" href="structexseis_1_1Flow_1_1TraceBlock.html#af5cca48f1aa88b5edb18fa069d9e435c">prm</a>-&gt;r, state-&gt;oGSz));</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;          <span class="keywordflow">if</span> (in-&gt;<a class="code" href="structexseis_1_1Flow_1_1TraceBlock.html#af5cca48f1aa88b5edb18fa069d9e435c">prm</a>-&gt;size() == 0) {</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;              <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;          }</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;          <span class="comment">// For each angle in the angle gather</span></div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;          <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> j = 0; j &lt; state-&gt;oGSz; j++) {</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;              <span class="comment">// For each sample (angle + radon)</span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;              <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> z = 0; z &lt; in-&gt;<a class="code" href="structexseis_1_1Flow_1_1TraceBlock.html#a943bec10b59c6672a1077285c902ba5e">ns</a>; z++) {</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                  <span class="comment">// We are using coordinate level accuracy when its not</span></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;                  <span class="comment">// performance critical.</span></div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;                  <a class="code" href="namespaceexseis_1_1utils_1_1typedefs.html#ab5b5063f7f6145715cf319bb08430bbd">exseis::utils::Floating_point</a> vmModel =</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;                    state-&gt;vtrc</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                      [in-&gt;<a class="code" href="structexseis_1_1Flow_1_1TraceBlock.html#ad4a1709bba637d2567b1e42bca98a307">gNum</a> * state-&gt;vNs</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;                       + std::min(</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;                           <span class="keywordtype">size_t</span>(</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;                             <a class="code" href="namespaceexseis_1_1utils_1_1typedefs.html#ab5b5063f7f6145715cf319bb08430bbd">exseis::utils::Floating_point</a>(z * in-&gt;<a class="code" href="structexseis_1_1Flow_1_1TraceBlock.html#a815be91bdc142565ed13ad73d4d825cf">inc</a>)</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;                             / state-&gt;vInc),</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;                           state-&gt;vNs)];</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;                  <a class="code" href="namespaceexseis_1_1utils_1_1typedefs.html#aebc7c2b48137ffa59c6d49a5fc8963c4">exseis::utils::Integer</a> k =</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;                    llround(</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;                      vmModel</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;                      / cos(<a class="code" href="namespaceexseis_1_1utils_1_1typedefs.html#ab5b5063f7f6145715cf319bb08430bbd">exseis::utils::Floating_point</a>(j * out-&gt;<a class="code" href="structexseis_1_1Flow_1_1TraceBlock.html#a815be91bdc142565ed13ad73d4d825cf">inc</a>)))</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;                    / state-&gt;vBin;</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;                  <span class="keywordflow">if</span> (k &gt; 0 &amp;&amp; <span class="keywordtype">size_t</span>(k) &lt; iGSz) {</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;                      out-&gt;<a class="code" href="structexseis_1_1Flow_1_1TraceBlock.html#ad4c3e52b7efac31a6da4d512c3d132dd">trc</a>[j * out-&gt;<a class="code" href="structexseis_1_1Flow_1_1TraceBlock.html#a943bec10b59c6672a1077285c902ba5e">ns</a> + z] = in-&gt;<a class="code" href="structexseis_1_1Flow_1_1TraceBlock.html#ad4c3e52b7efac31a6da4d512c3d132dd">trc</a>[k * in-&gt;<a class="code" href="structexseis_1_1Flow_1_1TraceBlock.html#a943bec10b59c6672a1077285c902ba5e">ns</a> + z];</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;                  }</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;              }</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;          }</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;          <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> j = 0; j &lt; state-&gt;oGSz; j++) {</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;              <span class="comment">// TODO: Set the rest of the parameters</span></div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;              <span class="comment">// TODO: Check the get numbers</span></div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;              param_utils::setPrm(</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;                j, <a class="code" href="Meta_8h.html#a06fc87d81c62e9abb8790b6e5713c55ba85ba03f9a8978665567fb0425807ef1d">PIOL_META_il</a>, state-&gt;il[in-&gt;<a class="code" href="structexseis_1_1Flow_1_1TraceBlock.html#ad4a1709bba637d2567b1e42bca98a307">gNum</a>], out-&gt;<a class="code" href="structexseis_1_1Flow_1_1TraceBlock.html#af5cca48f1aa88b5edb18fa069d9e435c">prm</a>.get());</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;              param_utils::setPrm(</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;                j, <a class="code" href="Meta_8h.html#a06fc87d81c62e9abb8790b6e5713c55ba12e0204597332f4066e8bee91b1ba727">PIOL_META_xl</a>, state-&gt;xl[in-&gt;<a class="code" href="structexseis_1_1Flow_1_1TraceBlock.html#ad4a1709bba637d2567b1e42bca98a307">gNum</a>], out-&gt;<a class="code" href="structexseis_1_1Flow_1_1TraceBlock.html#af5cca48f1aa88b5edb18fa069d9e435c">prm</a>.get());</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;          }</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;      }));</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;}</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;</div>
<div class="line"><a name="l00665"></a><span class="lineno"><a class="line" href="classexseis_1_1Flow_1_1Set.html#affd40ceed2574f0578dbcf191c9f7845">  665</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classexseis_1_1Flow_1_1Set.html#affd40ceed2574f0578dbcf191c9f7845">Set::taper</a>(<a class="code" href="namespaceexseis_1_1utils_1_1signal__processing.html#aa5e5cafa882a0d140c714ed82decf47d">Taper_function</a> taper_function, <span class="keywordtype">size_t</span> nTailLft, <span class="keywordtype">size_t</span> nTailRt)</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;{</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    <a class="code" href="classexseis_1_1Flow_1_1OpOpt.html">OpOpt</a> opt = {<a class="code" href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319abab4708d9c83eaf58f083050f2ec6854be">FuncOpt::NeedTrcVal</a>, <a class="code" href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319aba102488466f580b28970d40e492a89783">FuncOpt::ModTrcVal</a>, <a class="code" href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319aba30ee788a8ff4119624377271436e3c82">FuncOpt::DepTrcVal</a>,</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;                 <a class="code" href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319abaff12fbc3400acf905eee22b074704bd3">FuncOpt::SingleTrace</a>};</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <a class="code" href="classexseis_1_1Flow_1_1Set.html#afc31bd4caaed6a9b4dad64c613253ff1">func</a>.emplace_back(std::make_shared&lt;<a class="code" href="structexseis_1_1Flow_1_1Op.html">Op&lt;InPlaceMod&gt;</a>&gt;(</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;      opt, <a class="code" href="classexseis_1_1Flow_1_1Set.html#a1cb3f7abd880e38ece99eeafb3a2c3ab">rule</a>, <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;      [taper_function, nTailLft,</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;       nTailRt](<a class="code" href="structexseis_1_1Flow_1_1TraceBlock.html">TraceBlock</a>* in) -&gt; std::vector&lt;size_t&gt; {</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;          <span class="comment">// Loop over traces and apply the taper to each one</span></div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;          <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; in-&gt;<a class="code" href="structexseis_1_1Flow_1_1TraceBlock.html#af5cca48f1aa88b5edb18fa069d9e435c">prm</a>-&gt;size(); i++) {</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;              <span class="keyword">const</span> <span class="keyword">auto</span> trace_length = in-&gt;<a class="code" href="structexseis_1_1Flow_1_1TraceBlock.html#a943bec10b59c6672a1077285c902ba5e">ns</a>;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;              <span class="keyword">auto</span>* trace_i = &amp;(in-&gt;<a class="code" href="structexseis_1_1Flow_1_1TraceBlock.html#ad4c3e52b7efac31a6da4d512c3d132dd">trc</a>[i * trace_length]);</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;              <a class="code" href="namespaceexseis_1_1utils_1_1signal__processing.html#a3fe922daf3dcc4bb4840946c56fb31b6">exseis::utils::taper</a>(</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;                trace_length, trace_i, taper_function, nTailLft, nTailRt);</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;          }</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;          <span class="keywordflow">return</span> std::vector&lt;size_t&gt;{};</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;      }));</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;}</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;</div>
<div class="line"><a name="l00688"></a><span class="lineno"><a class="line" href="classexseis_1_1Flow_1_1Set.html#aebbfa453532f0d31507bdfe5ba29ab84">  688</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classexseis_1_1Flow_1_1Set.html#aebbfa453532f0d31507bdfe5ba29ab84">Set::AGC</a>(</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;  <a class="code" href="namespaceexseis_1_1utils_1_1signal__processing.html#acd29cc31dc6a6a502c78110cdf7e5611">Gain_function</a> agcFunc,</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;  <span class="keywordtype">size_t</span> window,</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;  <a class="code" href="namespaceexseis_1_1utils_1_1typedefs.html#a64100d12222e082dacce5e42e58b4499">exseis::utils::Trace_value</a> target_amplitude)</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;{</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <a class="code" href="classexseis_1_1Flow_1_1OpOpt.html">OpOpt</a> opt = {<a class="code" href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319abab4708d9c83eaf58f083050f2ec6854be">FuncOpt::NeedTrcVal</a>, <a class="code" href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319aba102488466f580b28970d40e492a89783">FuncOpt::ModTrcVal</a>, <a class="code" href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319aba30ee788a8ff4119624377271436e3c82">FuncOpt::DepTrcVal</a>,</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;                 <a class="code" href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319abaff12fbc3400acf905eee22b074704bd3">FuncOpt::SingleTrace</a>};</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    <a class="code" href="classexseis_1_1Flow_1_1Set.html#afc31bd4caaed6a9b4dad64c613253ff1">func</a>.emplace_back(std::make_shared&lt;<a class="code" href="structexseis_1_1Flow_1_1Op.html">Op&lt;InPlaceMod&gt;</a>&gt;(</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;      opt, <a class="code" href="classexseis_1_1Flow_1_1Set.html#a1cb3f7abd880e38ece99eeafb3a2c3ab">rule</a>, <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;      [agcFunc, window,</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;       target_amplitude](<a class="code" href="structexseis_1_1Flow_1_1TraceBlock.html">TraceBlock</a>* in) -&gt; std::vector&lt;size_t&gt; {</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;          <span class="keyword">const</span> <span class="keyword">auto</span> num_traces        = in-&gt;<a class="code" href="structexseis_1_1Flow_1_1TraceBlock.html#af5cca48f1aa88b5edb18fa069d9e435c">prm</a>-&gt;size();</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;          <span class="keyword">const</span> <span class="keyword">auto</span> samples_per_trace = in-&gt;<a class="code" href="structexseis_1_1Flow_1_1TraceBlock.html#a943bec10b59c6672a1077285c902ba5e">ns</a>;</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;          <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; num_traces; i++) {</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;              <span class="comment">// Pointer to the beginning of trace i.</span></div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;              <span class="keyword">auto</span>* trace_start = &amp;(in-&gt;<a class="code" href="structexseis_1_1Flow_1_1TraceBlock.html#ad4c3e52b7efac31a6da4d512c3d132dd">trc</a>[i * in-&gt;<a class="code" href="structexseis_1_1Flow_1_1TraceBlock.html#a943bec10b59c6672a1077285c902ba5e">ns</a>]);</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;              <a class="code" href="namespaceexseis_1_1utils_1_1signal__processing.html#ac3657297390aa12deb2b01be9bd41941">exseis::utils::AGC</a>(</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;                samples_per_trace, trace_start, agcFunc, window,</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;                target_amplitude);</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;          }</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;          <span class="keywordflow">return</span> std::vector&lt;size_t&gt;{};</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;      }));</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;}</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;</div>
<div class="line"><a name="l00715"></a><span class="lineno"><a class="line" href="classexseis_1_1Flow_1_1Set.html#a095fbcda5adb6077e875fee371b3456d">  715</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classexseis_1_1Flow_1_1Set.html#a095fbcda5adb6077e875fee371b3456d">Set::text</a>(std::string outmsg_)</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;{</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    <a class="code" href="classexseis_1_1Flow_1_1Set.html#aa97113d10c048fce74f34ffad50cf576">outmsg</a> = outmsg_;</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;}</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;<span class="comment">/********************************** Non-Core **********************************/</span></div>
<div class="line"><a name="l00721"></a><span class="lineno"><a class="line" href="classexseis_1_1Flow_1_1Set.html#a4d160a2a1fb2c665dd2453574353c989">  721</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classexseis_1_1Flow_1_1Set.html#a3695d248db2c3434819a5f57725af932">Set::sort</a>(<a class="code" href="namespaceexseis_1_1PIOL.html#a5b9dd1fe7ee68519178112abb8da6355">SortType</a> type)</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;{</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    <a class="code" href="classexseis_1_1Flow_1_1Set.html#a3695d248db2c3434819a5f57725af932">Set::sort</a>(<a class="code" href="namespaceexseis_1_1PIOL.html#ab8af5564f915dd26d177f4d9d49c74c0">getComp</a>(type));</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;}</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;</div>
<div class="line"><a name="l00726"></a><span class="lineno"><a class="line" href="classexseis_1_1Flow_1_1Set.html#a7c2d6c1bf597b4ff387e1ac97cee30fe">  726</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classexseis_1_1Flow_1_1Set.html#a71cfc89c0e09e0aa4ca4456111ea3609">Set::getMinMax</a>(<a class="code" href="namespaceexseis_1_1PIOL.html#a2be91eb3ea9f1d1c3113be99452e8818">Meta</a> m1, <a class="code" href="namespaceexseis_1_1PIOL.html#a2be91eb3ea9f1d1c3113be99452e8818">Meta</a> m2, <a class="code" href="structPIOL__CoordElem.html">CoordElem</a>* minmax)</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;{</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <span class="keywordtype">bool</span> m1Add = <a class="code" href="classexseis_1_1Flow_1_1Set.html#a1cb3f7abd880e38ece99eeafb3a2c3ab">rule</a>-&gt;addRule(m1);</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    <span class="keywordtype">bool</span> m2Add = <a class="code" href="classexseis_1_1Flow_1_1Set.html#a1cb3f7abd880e38ece99eeafb3a2c3ab">rule</a>-&gt;addRule(m2);</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    <a class="code" href="classexseis_1_1Flow_1_1Set.html#a71cfc89c0e09e0aa4ca4456111ea3609">Set::getMinMax</a>(</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;      [m1](<span class="keyword">const</span> <a class="code" href="structexseis_1_1PIOL_1_1Param.html">Param</a>&amp; a) -&gt; <a class="code" href="namespaceexseis_1_1utils_1_1typedefs.html#ab5b5063f7f6145715cf319bb08430bbd">exseis::utils::Floating_point</a> {</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;          <span class="keywordflow">return</span> param_utils::getPrm&lt;exseis::utils::Floating_point&gt;(</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;            0LU, m1, &amp;a);</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;      },</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;      [m2](<span class="keyword">const</span> <a class="code" href="structexseis_1_1PIOL_1_1Param.html">Param</a>&amp; a) -&gt; <a class="code" href="namespaceexseis_1_1utils_1_1typedefs.html#ab5b5063f7f6145715cf319bb08430bbd">exseis::utils::Floating_point</a> {</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;          <span class="keywordflow">return</span> param_utils::getPrm&lt;exseis::utils::Floating_point&gt;(</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;            0LU, m2, &amp;a);</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;      },</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;      minmax);</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    <span class="keywordflow">if</span> (m1Add) {</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;        <a class="code" href="classexseis_1_1Flow_1_1Set.html#a1cb3f7abd880e38ece99eeafb3a2c3ab">rule</a>-&gt;rmRule(m1);</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    }</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    <span class="keywordflow">if</span> (m2Add) {</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;        <a class="code" href="classexseis_1_1Flow_1_1Set.html#a1cb3f7abd880e38ece99eeafb3a2c3ab">rule</a>-&gt;rmRule(m2);</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    }</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;}</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;</div>
<div class="line"><a name="l00750"></a><span class="lineno"><a class="line" href="classexseis_1_1Flow_1_1Set.html#a645063a4fcdb9406b69610e593bb80fe">  750</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classexseis_1_1Flow_1_1Set.html#a645063a4fcdb9406b69610e593bb80fe">Set::temporalFilter</a>(</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;  <a class="code" href="namespaceexseis_1_1PIOL.html#a65d10651444e91a06ca9a25e757c5c86">FltrType</a> type,</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;  <a class="code" href="namespaceexseis_1_1PIOL.html#a4529a9993c29d359eca51832a8bbf074">FltrDmn</a> domain,</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;  <a class="code" href="namespaceexseis_1_1PIOL.html#a3a1f4505c212c3a79c533a3cc27797f4">PadType</a> pad,</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;  <a class="code" href="namespaceexseis_1_1utils_1_1typedefs.html#a64100d12222e082dacce5e42e58b4499">exseis::utils::Trace_value</a> fs,</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;  std::vector&lt;exseis::utils::Trace_value&gt; corners,</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;  <span class="keywordtype">size_t</span> nw,</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;  <span class="keywordtype">size_t</span> winCntr)</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;{</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    assert(corners.size() == 2);</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    <a class="code" href="classexseis_1_1Flow_1_1OpOpt.html">OpOpt</a> opt = {<a class="code" href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319abab4708d9c83eaf58f083050f2ec6854be">FuncOpt::NeedTrcVal</a>, <a class="code" href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319aba102488466f580b28970d40e492a89783">FuncOpt::ModTrcVal</a>, <a class="code" href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319aba30ee788a8ff4119624377271436e3c82">FuncOpt::DepTrcVal</a>,</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;                 <a class="code" href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319abaff12fbc3400acf905eee22b074704bd3">FuncOpt::SingleTrace</a>};</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    <a class="code" href="classexseis_1_1Flow_1_1Set.html#afc31bd4caaed6a9b4dad64c613253ff1">func</a>.emplace_back(std::make_shared&lt;<a class="code" href="structexseis_1_1Flow_1_1Op.html">Op&lt;InPlaceMod&gt;</a>&gt;(</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;      opt, <a class="code" href="classexseis_1_1Flow_1_1Set.html#a1cb3f7abd880e38ece99eeafb3a2c3ab">rule</a>, <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;      [type, domain, corners, pad, fs, nw,</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;       winCntr](<a class="code" href="structexseis_1_1Flow_1_1TraceBlock.html">TraceBlock</a>* in) -&gt; std::vector&lt;size_t&gt; {</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;          <a class="code" href="namespaceexseis_1_1PIOL.html#ad500ddf5399e2049a814d0d1ddc4d7f9">PIOL::temporalFilter</a>(</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;            in-&gt;<a class="code" href="structexseis_1_1Flow_1_1TraceBlock.html#af5cca48f1aa88b5edb18fa069d9e435c">prm</a>-&gt;size(), in-&gt;<a class="code" href="structexseis_1_1Flow_1_1TraceBlock.html#a943bec10b59c6672a1077285c902ba5e">ns</a>, in-&gt;<a class="code" href="structexseis_1_1Flow_1_1TraceBlock.html#ad4c3e52b7efac31a6da4d512c3d132dd">trc</a>.data(), fs, type, domain, pad, nw,</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;            winCntr, corners);</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;          <span class="keywordflow">return</span> std::vector&lt;size_t&gt;{};</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;      }));</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;}</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;</div>
<div class="line"><a name="l00773"></a><span class="lineno"><a class="line" href="classexseis_1_1Flow_1_1Set.html#aee3c385bb925907349498eaeb5008a42">  773</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classexseis_1_1Flow_1_1Set.html#a645063a4fcdb9406b69610e593bb80fe">Set::temporalFilter</a>(</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;  <a class="code" href="namespaceexseis_1_1PIOL.html#a65d10651444e91a06ca9a25e757c5c86">FltrType</a> type,</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;  <a class="code" href="namespaceexseis_1_1PIOL.html#a4529a9993c29d359eca51832a8bbf074">FltrDmn</a> domain,</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;  <a class="code" href="namespaceexseis_1_1PIOL.html#a3a1f4505c212c3a79c533a3cc27797f4">PadType</a> pad,</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;  <a class="code" href="namespaceexseis_1_1utils_1_1typedefs.html#a64100d12222e082dacce5e42e58b4499">exseis::utils::Trace_value</a> fs,</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;  <span class="keywordtype">size_t</span> N,</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;  std::vector&lt;exseis::utils::Trace_value&gt; corners,</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;  <span class="keywordtype">size_t</span> nw,</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;  <span class="keywordtype">size_t</span> winCntr)</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;{</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    assert(corners.size() == 2);</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    <a class="code" href="classexseis_1_1Flow_1_1OpOpt.html">OpOpt</a> opt = {<a class="code" href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319abab4708d9c83eaf58f083050f2ec6854be">FuncOpt::NeedTrcVal</a>, <a class="code" href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319aba102488466f580b28970d40e492a89783">FuncOpt::ModTrcVal</a>, <a class="code" href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319aba30ee788a8ff4119624377271436e3c82">FuncOpt::DepTrcVal</a>,</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;                 <a class="code" href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319abaff12fbc3400acf905eee22b074704bd3">FuncOpt::SingleTrace</a>};</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    <a class="code" href="classexseis_1_1Flow_1_1Set.html#afc31bd4caaed6a9b4dad64c613253ff1">func</a>.emplace_back(std::make_shared&lt;<a class="code" href="structexseis_1_1Flow_1_1Op.html">Op&lt;InPlaceMod&gt;</a>&gt;(</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;      opt, <a class="code" href="classexseis_1_1Flow_1_1Set.html#a1cb3f7abd880e38ece99eeafb3a2c3ab">rule</a>, <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;      [type, domain, corners, pad, fs, nw, winCntr,</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;       N](<a class="code" href="structexseis_1_1Flow_1_1TraceBlock.html">TraceBlock</a>* in) -&gt; std::vector&lt;size_t&gt; {</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;          <a class="code" href="namespaceexseis_1_1PIOL.html#ad500ddf5399e2049a814d0d1ddc4d7f9">PIOL::temporalFilter</a>(</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;            in-&gt;<a class="code" href="structexseis_1_1Flow_1_1TraceBlock.html#af5cca48f1aa88b5edb18fa069d9e435c">prm</a>-&gt;size(), in-&gt;<a class="code" href="structexseis_1_1Flow_1_1TraceBlock.html#a943bec10b59c6672a1077285c902ba5e">ns</a>, in-&gt;<a class="code" href="structexseis_1_1Flow_1_1TraceBlock.html#ad4c3e52b7efac31a6da4d512c3d132dd">trc</a>.data(), fs, type, domain, pad, nw,</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;            winCntr, corners, N);</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;          <span class="keywordflow">return</span> std::vector&lt;size_t&gt;{};</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;      }));</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;}</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;}  <span class="comment">// namespace Flow</span></div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;}  <span class="comment">// namespace exseis</span></div>
<div class="ttc" id="structPIOL__CoordElem_html_aaf24816dd37848b0c3895c4bbda88373"><div class="ttname"><a href="structPIOL__CoordElem.html#aaf24816dd37848b0c3895c4bbda88373">PIOL_CoordElem::num</a></div><div class="ttdeci">size_t num</div><div class="ttdoc">The trace number. </div><div class="ttdef"><b>Definition:</b> <a href="minmax_8h_source.html#l00022">minmax.h:22</a></div></div>
<div class="ttc" id="namespaceexseis_1_1Flow_html_ad1580c3d2a940395d45569c3cb0319aba6e74f27bf65a67a7e2238eb32d1df2b0"><div class="ttname"><a href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319aba6e74f27bf65a67a7e2238eb32d1df2b0">exseis::Flow::FuncOpt::SubSetOnly</a></div><div class="ttdoc">Each output trace requires info from all traces in a subset of files. </div></div>
<div class="ttc" id="classexseis_1_1Flow_1_1Set_html_a23600e7a3faca4c51aaf349e46003387"><div class="ttname"><a href="classexseis_1_1Flow_1_1Set.html#a23600e7a3faca4c51aaf349e46003387">exseis::Flow::Set::startGather</a></div><div class="ttdeci">std::string startGather(FuncLst::iterator fCurr, FuncLst::iterator fEnd)</div><div class="ttdef"><b>Definition:</b> <a href="Set_8cc_source.html#l00270">Set.cc:270</a></div></div>
<div class="ttc" id="Meta_8h_html_a06fc87d81c62e9abb8790b6e5713c55ba9c7734c7c9a0075f84ebd39e08dfbea4"><div class="ttname"><a href="Meta_8h.html#a06fc87d81c62e9abb8790b6e5713c55ba9c7734c7c9a0075f84ebd39e08dfbea4">PIOL_META_yCmp</a></div><div class="ttdoc">The CMP y coordinate. </div><div class="ttdef"><b>Definition:</b> <a href="Meta_8h_source.html#l00101">Meta.h:101</a></div></div>
<div class="ttc" id="structexseis_1_1Flow_1_1TraceBlock_html_a815be91bdc142565ed13ad73d4d825cf"><div class="ttname"><a href="structexseis_1_1Flow_1_1TraceBlock.html#a815be91bdc142565ed13ad73d4d825cf">exseis::Flow::TraceBlock::inc</a></div><div class="ttdeci">exseis::utils::Floating_point inc</div><div class="ttdoc">Increment between trace samples. </div><div class="ttdef"><b>Definition:</b> <a href="TraceBlock_8hh_source.html#l00029">TraceBlock.hh:29</a></div></div>
<div class="ttc" id="namespaceexseis_1_1Flow_html_ad1580c3d2a940395d45569c3cb0319abab4708d9c83eaf58f083050f2ec6854be"><div class="ttname"><a href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319abab4708d9c83eaf58f083050f2ec6854be">exseis::Flow::FuncOpt::NeedTrcVal</a></div><div class="ttdoc">Trace values required to be read. </div></div>
<div class="ttc" id="classexseis_1_1Flow_1_1Set_html_a5b52ce04333a5b8af6ec1c1b31ee846a"><div class="ttname"><a href="classexseis_1_1Flow_1_1Set.html#a5b52ce04333a5b8af6ec1c1b31ee846a">exseis::Flow::Set::piol</a></div><div class="ttdeci">std::shared_ptr&lt; exseis::PIOL::ExSeisPIOL &gt; piol</div><div class="ttdoc">The PIOL object. </div><div class="ttdef"><b>Definition:</b> <a href="Set_8hh_source.html#l00042">Set.hh:42</a></div></div>
<div class="ttc" id="classexseis_1_1Flow_1_1Set_html_a2e93309ef516832b37ab4f61eed06d61"><div class="ttname"><a href="classexseis_1_1Flow_1_1Set.html#a2e93309ef516832b37ab4f61eed06d61">exseis::Flow::Set::numRank</a></div><div class="ttdeci">size_t numRank</div><div class="ttdoc">The number of ranks. </div><div class="ttdef"><b>Definition:</b> <a href="Set_8hh_source.html#l00072">Set.hh:72</a></div></div>
<div class="ttc" id="namespaceexseis_1_1utils_1_1signal__processing_html_acd29cc31dc6a6a502c78110cdf7e5611"><div class="ttname"><a href="namespaceexseis_1_1utils_1_1signal__processing.html#acd29cc31dc6a6a502c78110cdf7e5611">exseis::utils::signal_processing::Gain_function</a></div><div class="ttdeci">Trace_value(*)(const Trace_value *signal, size_t window_size, Trace_value target_amplitude, size_t window_center) Gain_function</div><div class="ttdoc">Function type for signal scaling/normalization in the AGC function. </div><div class="ttdef"><b>Definition:</b> <a href="Gain__function_8h_source.html#l00070">Gain_function.h:70</a></div></div>
<div class="ttc" id="namespaceexseis_1_1PIOL_html_a303887c34be91078488b0d64b694030a"><div class="ttname"><a href="namespaceexseis_1_1PIOL.html#a303887c34be91078488b0d64b694030a">exseis::PIOL::getIlXlGathers</a></div><div class="ttdeci">utils::Distributed_vector&lt; Gather_info &gt; getIlXlGathers(ExSeisPIOL *piol, ReadInterface *file)</div><div class="ttdef"><b>Definition:</b> <a href="gather_8cc_source.html#l00094">gather.cc:94</a></div></div>
<div class="ttc" id="Meta_8h_html_a06fc87d81c62e9abb8790b6e5713c55ba0fbfb9477d30ba6d7a8c9de0c3cb7fa0"><div class="ttname"><a href="Meta_8h.html#a06fc87d81c62e9abb8790b6e5713c55ba0fbfb9477d30ba6d7a8c9de0c3cb7fa0">PIOL_META_yRcv</a></div><div class="ttdoc">The receiver y coordinate. </div><div class="ttdef"><b>Definition:</b> <a href="Meta_8h_source.html#l00095">Meta.h:95</a></div></div>
<div class="ttc" id="structexseis_1_1Flow_1_1TraceBlock_html"><div class="ttname"><a href="structexseis_1_1Flow_1_1TraceBlock.html">exseis::Flow::TraceBlock</a></div><div class="ttdef"><b>Definition:</b> <a href="TraceBlock_8hh_source.html#l00021">TraceBlock.hh:21</a></div></div>
<div class="ttc" id="param__utils_8hh_html"><div class="ttname"><a href="param__utils_8hh.html">param_utils.hh</a></div><div class="ttdoc">The File layer interface. </div></div>
<div class="ttc" id="Meta_8h_html_a06fc87d81c62e9abb8790b6e5713c55bab66a619a80301fe7107c9003de51913c"><div class="ttname"><a href="Meta_8h.html#a06fc87d81c62e9abb8790b6e5713c55bab66a619a80301fe7107c9003de51913c">PIOL_META_xRcv</a></div><div class="ttdoc">The receiver x coordinate. </div><div class="ttdef"><b>Definition:</b> <a href="Meta_8h_source.html#l00092">Meta.h:92</a></div></div>
<div class="ttc" id="classexseis_1_1Flow_1_1Set_html_a2670385a98d96352b22f84516a1798df"><div class="ttname"><a href="classexseis_1_1Flow_1_1Set.html#a2670385a98d96352b22f84516a1798df">exseis::Flow::Set::~Set</a></div><div class="ttdeci">~Set(void)</div><div class="ttdef"><b>Definition:</b> <a href="Set_8cc_source.html#l00058">Set.cc:58</a></div></div>
<div class="ttc" id="structexseis_1_1Flow_1_1TraceBlock_html_af5cca48f1aa88b5edb18fa069d9e435c"><div class="ttname"><a href="structexseis_1_1Flow_1_1TraceBlock.html#af5cca48f1aa88b5edb18fa069d9e435c">exseis::Flow::TraceBlock::prm</a></div><div class="ttdeci">std::unique_ptr&lt; exseis::PIOL::Param &gt; prm</div><div class="ttdoc">unique pointer to parameter structure (if applicable) </div><div class="ttdef"><b>Definition:</b> <a href="TraceBlock_8hh_source.html#l00038">TraceBlock.hh:38</a></div></div>
<div class="ttc" id="ReadSEGY_8hh_html"><div class="ttname"><a href="ReadSEGY_8hh.html">ReadSEGY.hh</a></div><div class="ttdoc">The SEGY implementation for ReadInterface. </div></div>
<div class="ttc" id="namespaceexseis_1_1PIOL_html_ad7ae8666ebcb33384798d663719c1217"><div class="ttname"><a href="namespaceexseis_1_1PIOL.html#ad7ae8666ebcb33384798d663719c1217">exseis::PIOL::MinMaxFunc</a></div><div class="ttdeci">std::function&lt; exseis::utils::Floating_point(const T &amp;)&gt; MinMaxFunc</div><div class="ttdoc">Return the value associated with a particular parameter. </div><div class="ttdef"><b>Definition:</b> <a href="minmax_8h_source.html#l00052">minmax.h:52</a></div></div>
<div class="ttc" id="classexseis_1_1Flow_1_1Set_html_abb95720c426709b2a184e4f4a4b10911"><div class="ttname"><a href="classexseis_1_1Flow_1_1Set.html#abb95720c426709b2a184e4f4a4b10911">exseis::Flow::Set::Set</a></div><div class="ttdeci">Set(std::shared_ptr&lt; exseis::PIOL::ExSeisPIOL &gt; piol_, std::string pattern, std::string outfix_, std::shared_ptr&lt; exseis::PIOL::Rule &gt; rule_=std::make_shared&lt; exseis::PIOL::Rule &gt;(std::initializer_list&lt; exseis::PIOL::Meta &gt;{PIOL_META_COPY}))</div><div class="ttdef"><b>Definition:</b> <a href="Set_8cc_source.html#l00034">Set.cc:34</a></div></div>
<div class="ttc" id="Set_8hh_html"><div class="ttname"><a href="Set_8hh.html">Set.hh</a></div><div class="ttdoc">The Set layer interface. </div></div>
<div class="ttc" id="Meta_8h_html_a06fc87d81c62e9abb8790b6e5713c55babc95402b3493f1011557da2c10c69f48"><div class="ttname"><a href="Meta_8h.html#a06fc87d81c62e9abb8790b6e5713c55babc95402b3493f1011557da2c10c69f48">PIOL_META_tn</a></div><div class="ttdoc">The trace number (file) </div><div class="ttdef"><b>Definition:</b> <a href="Meta_8h_source.html#l00041">Meta.h:41</a></div></div>
<div class="ttc" id="namespaceexseis_1_1Flow_html_ad1580c3d2a940395d45569c3cb0319aba102488466f580b28970d40e492a89783"><div class="ttname"><a href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319aba102488466f580b28970d40e492a89783">exseis::Flow::FuncOpt::ModTrcVal</a></div><div class="ttdoc">Trace values are modified by the operation. </div></div>
<div class="ttc" id="classexseis_1_1Flow_1_1Set_html_a8c0f571437bc79006387986c23efad46"><div class="ttname"><a href="classexseis_1_1Flow_1_1Set.html#a8c0f571437bc79006387986c23efad46">exseis::Flow::Set::startSubset</a></div><div class="ttdeci">FuncLst::iterator startSubset(FuncLst::iterator fCurr, FuncLst::iterator fEnd)</div><div class="ttdef"><b>Definition:</b> <a href="Set_8cc_source.html#l00436">Set.cc:436</a></div></div>
<div class="ttc" id="AGC_8h_html"><div class="ttname"><a href="AGC_8h.html">AGC.h</a></div><div class="ttdoc">The Automatic Gain Control Operation. </div></div>
<div class="ttc" id="classexseis_1_1Flow_1_1Set_html_a900640beb3531127c3b75c023e8206b4"><div class="ttname"><a href="classexseis_1_1Flow_1_1Set.html#a900640beb3531127c3b75c023e8206b4">exseis::Flow::Set::calcFuncS</a></div><div class="ttdeci">FuncLst::iterator calcFuncS(FuncLst::iterator fCurr, FuncLst::iterator fEnd, FileDeque &amp;fQue)</div><div class="ttdef"><b>Definition:</b> <a href="Set_8cc_source.html#l00401">Set.cc:401</a></div></div>
<div class="ttc" id="WriteSEGY_8hh_html"><div class="ttname"><a href="WriteSEGY_8hh.html">WriteSEGY.hh</a></div><div class="ttdoc">The SEGY implementation of the WriteInterface. </div></div>
<div class="ttc" id="classexseis_1_1Flow_1_1Cache_html_a62861a343a4538202be0c60e62a3b584"><div class="ttname"><a href="classexseis_1_1Flow_1_1Cache.html#a62861a343a4538202be0c60e62a3b584">exseis::Flow::Cache::cachePrm</a></div><div class="ttdeci">std::shared_ptr&lt; TraceBlock &gt; cachePrm(std::shared_ptr&lt; exseis::PIOL::Rule &gt; rule, FileDeque &amp;desc)</div><div class="ttdef"><b>Definition:</b> <a href="Cache_8hh_source.html#l00058">Cache.hh:58</a></div></div>
<div class="ttc" id="Op_8hh_html"><div class="ttname"><a href="Op_8hh.html">Op.hh</a></div></div>
<div class="ttc" id="namespaceexseis_1_1PIOL_html_ad500ddf5399e2049a814d0d1ddc4d7f9"><div class="ttname"><a href="namespaceexseis_1_1PIOL.html#ad500ddf5399e2049a814d0d1ddc4d7f9">exseis::PIOL::temporalFilter</a></div><div class="ttdeci">void temporalFilter(size_t nt, size_t ns, exseis::utils::Trace_value *trc, exseis::utils::Trace_value fs, FltrType type, FltrDmn domain, PadType pad, size_t nw, size_t winCntr, std::vector&lt; exseis::utils::Trace_value &gt; corner)</div><div class="ttdef"><b>Definition:</b> <a href="temporalfilter_8cc_source.html#l00243">temporalfilter.cc:243</a></div></div>
<div class="ttc" id="namespaceexseis_1_1PIOL_html_a2be91eb3ea9f1d1c3113be99452e8818"><div class="ttname"><a href="namespaceexseis_1_1PIOL.html#a2be91eb3ea9f1d1c3113be99452e8818">exseis::PIOL::Meta</a></div><div class="ttdeci">PIOL_Meta Meta</div><div class="ttdef"><b>Definition:</b> <a href="Meta_8h_source.html#l00017">Meta.h:17</a></div></div>
<div class="ttc" id="classexseis_1_1Flow_1_1Cache_html_aea547d75d7879b2a9f0dcb67a9400df5"><div class="ttname"><a href="classexseis_1_1Flow_1_1Cache.html#aea547d75d7879b2a9f0dcb67a9400df5">exseis::Flow::Cache::cacheTrc</a></div><div class="ttdeci">std::shared_ptr&lt; TraceBlock &gt; cacheTrc(FileDeque &amp;desc)</div><div class="ttdef"><b>Definition:</b> <a href="Cache_8hh_source.html#l00069">Cache.hh:69</a></div></div>
<div class="ttc" id="namespaceexseis_1_1Flow_html_ad1580c3d2a940395d45569c3cb0319abaa017fd0be156f03044876768971d158a"><div class="ttname"><a href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319abaa017fd0be156f03044876768971d158a">exseis::Flow::FuncOpt::DepTrcOrder</a></div><div class="ttdoc">There is a dependency on the order of traces. </div></div>
<div class="ttc" id="Meta_8h_html_a06fc87d81c62e9abb8790b6e5713c55ba28af5782759644d846cc502b36b3b254"><div class="ttname"><a href="Meta_8h.html#a06fc87d81c62e9abb8790b6e5713c55ba28af5782759644d846cc502b36b3b254">PIOL_META_xCmp</a></div><div class="ttdoc">The CMP x coordinate. </div><div class="ttdef"><b>Definition:</b> <a href="Meta_8h_source.html#l00098">Meta.h:98</a></div></div>
<div class="ttc" id="classexseis_1_1Flow_1_1Set_html_a71cfc89c0e09e0aa4ca4456111ea3609"><div class="ttname"><a href="classexseis_1_1Flow_1_1Set.html#a71cfc89c0e09e0aa4ca4456111ea3609">exseis::Flow::Set::getMinMax</a></div><div class="ttdeci">void getMinMax(exseis::PIOL::MinMaxFunc&lt; exseis::PIOL::Param &gt; xlam, exseis::PIOL::MinMaxFunc&lt; exseis::PIOL::Param &gt; ylam, exseis::PIOL::CoordElem *minmax)</div><div class="ttdef"><b>Definition:</b> <a href="Set_8cc_source.html#l00517">Set.cc:517</a></div></div>
<div class="ttc" id="classexseis_1_1Flow_1_1Set_html_abdd80913edcf7d89fe265f470338aac3"><div class="ttname"><a href="classexseis_1_1Flow_1_1Set.html#abdd80913edcf7d89fe265f470338aac3">exseis::Flow::Set::startSingle</a></div><div class="ttdeci">std::vector&lt; std::string &gt; startSingle(FuncLst::iterator fCurr, FuncLst::iterator fEnd)</div><div class="ttdef"><b>Definition:</b> <a href="Set_8cc_source.html#l00171">Set.cc:171</a></div></div>
<div class="ttc" id="namespaceexseis_1_1PIOL_html_ab8af5564f915dd26d177f4d9d49c74c0"><div class="ttname"><a href="namespaceexseis_1_1PIOL.html#ab8af5564f915dd26d177f4d9d49c74c0">exseis::PIOL::getComp</a></div><div class="ttdeci">CompareP getComp(SortType type)</div><div class="ttdef"><b>Definition:</b> <a href="src_2sort_8cc_source.html#l00364">sort.cc:364</a></div></div>
<div class="ttc" id="Meta_8h_html_a06fc87d81c62e9abb8790b6e5713c55ba12e0204597332f4066e8bee91b1ba727"><div class="ttname"><a href="Meta_8h.html#a06fc87d81c62e9abb8790b6e5713c55ba12e0204597332f4066e8bee91b1ba727">PIOL_META_xl</a></div><div class="ttdoc">The crossline number. </div><div class="ttdef"><b>Definition:</b> <a href="Meta_8h_source.html#l00107">Meta.h:107</a></div></div>
<div class="ttc" id="namespaceexseis_1_1utils_1_1decomposition_html_a82dafa151b9e1c07265fb50c0ddfbc69"><div class="ttname"><a href="namespaceexseis_1_1utils_1_1decomposition.html#a82dafa151b9e1c07265fb50c0ddfbc69">exseis::utils::decomposition::block_decomposition</a></div><div class="ttdeci">Contiguous_decomposition block_decomposition(size_t range_size, size_t num_ranks, size_t rank)</div><div class="ttdoc">Perform a 1d decomposition of the interval [0,range_size-1] into num_ranks pieces so it is optimally ...</div><div class="ttdef"><b>Definition:</b> <a href="block__decomposition_8cc_source.html#l00021">block_decomposition.cc:21</a></div></div>
<div class="ttc" id="classexseis_1_1Flow_1_1Set_html_aebbfa453532f0d31507bdfe5ba29ab84"><div class="ttname"><a href="classexseis_1_1Flow_1_1Set.html#aebbfa453532f0d31507bdfe5ba29ab84">exseis::Flow::Set::AGC</a></div><div class="ttdeci">void AGC(exseis::utils::Gain_function agcFunc, size_t window, exseis::utils::Trace_value target_amplitude)</div><div class="ttdef"><b>Definition:</b> <a href="Set_8cc_source.html#l00688">Set.cc:688</a></div></div>
<div class="ttc" id="makeFile_8hh_html"><div class="ttname"><a href="makeFile_8hh.html">makeFile.hh</a></div><div class="ttdoc">Functions for creating instances of ReadInterface and WriteInterface. </div></div>
<div class="ttc" id="Meta_8h_html_a06fc87d81c62e9abb8790b6e5713c55ba4ff1058d9961bfc317053d5432a368a8"><div class="ttname"><a href="Meta_8h.html#a06fc87d81c62e9abb8790b6e5713c55ba4ff1058d9961bfc317053d5432a368a8">PIOL_META_WtrDepRcv</a></div><div class="ttdoc">The Water depth at receiver. </div><div class="ttdef"><b>Definition:</b> <a href="Meta_8h_source.html#l00083">Meta.h:83</a></div></div>
<div class="ttc" id="structexseis_1_1Flow_1_1TraceBlock_html_ad4c3e52b7efac31a6da4d512c3d132dd"><div class="ttname"><a href="structexseis_1_1Flow_1_1TraceBlock.html#ad4c3e52b7efac31a6da4d512c3d132dd">exseis::Flow::TraceBlock::trc</a></div><div class="ttdeci">std::vector&lt; exseis::utils::Trace_value &gt; trc</div><div class="ttdoc">traces (if applicable) </div><div class="ttdef"><b>Definition:</b> <a href="TraceBlock_8hh_source.html#l00041">TraceBlock.hh:41</a></div></div>
<div class="ttc" id="classexseis_1_1PIOL_1_1ReadInterface_html"><div class="ttname"><a href="classexseis_1_1PIOL_1_1ReadInterface.html">exseis::PIOL::ReadInterface</a></div><div class="ttdoc">The ReadInterface class is a generic interface for reading seismic data files. </div><div class="ttdef"><b>Definition:</b> <a href="ReadInterface_8hh_source.html#l00025">ReadInterface.hh:25</a></div></div>
<div class="ttc" id="structPIOL__CoordElem_html"><div class="ttname"><a href="structPIOL__CoordElem.html">PIOL_CoordElem</a></div><div class="ttdef"><b>Definition:</b> <a href="minmax_8h_source.html#l00017">minmax.h:17</a></div></div>
<div class="ttc" id="classexseis_1_1Flow_1_1OpOpt_html"><div class="ttname"><a href="classexseis_1_1Flow_1_1OpOpt.html">exseis::Flow::OpOpt</a></div><div class="ttdef"><b>Definition:</b> <a href="OpOpt_8hh_source.html#l00018">OpOpt.hh:18</a></div></div>
<div class="ttc" id="namespaceexseis_1_1PIOL_html_a65d10651444e91a06ca9a25e757c5c86"><div class="ttname"><a href="namespaceexseis_1_1PIOL.html#a65d10651444e91a06ca9a25e757c5c86">exseis::PIOL::FltrType</a></div><div class="ttdeci">FltrType</div><div class="ttdoc">An enum class of the different types of filters. </div><div class="ttdef"><b>Definition:</b> <a href="temporalfilter_8hh_source.html#l00023">temporalfilter.hh:23</a></div></div>
<div class="ttc" id="namespaceexseis_1_1Flow_html_a5af232da7db8c2988c7bee1acec031fb"><div class="ttname"><a href="namespaceexseis_1_1Flow.html#a5af232da7db8c2988c7bee1acec031fb">exseis::Flow::Mod</a></div><div class="ttdeci">std::function&lt; void(const TraceBlock *in, TraceBlock *out)&gt; Mod</div><div class="ttdef"><b>Definition:</b> <a href="Set_8cc_source.html#l00027">Set.cc:27</a></div></div>
<div class="ttc" id="namespaceexseis_1_1Flow_html_ad1580c3d2a940395d45569c3cb0319abaf6dfa34f37b50e8edb92f1ee150a799b"><div class="ttname"><a href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319abaf6dfa34f37b50e8edb92f1ee150a799b">exseis::Flow::FuncOpt::DepMetaVal</a></div><div class="ttdoc">There is a dependency on the metadata values. </div></div>
<div class="ttc" id="namespaceexseis_1_1Flow_html_ad1580c3d2a940395d45569c3cb0319aba7076cb4bc47b8f7d628bc2a44d252734"><div class="ttname"><a href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319aba7076cb4bc47b8f7d628bc2a44d252734">exseis::Flow::FuncOpt::DepTrcCnt</a></div><div class="ttdoc">There is a dependency on the number of traces. </div></div>
<div class="ttc" id="Meta_8h_html_a06fc87d81c62e9abb8790b6e5713c55baee42d285457ad3c6e3bd25706ab90718"><div class="ttname"><a href="Meta_8h.html#a06fc87d81c62e9abb8790b6e5713c55baee42d285457ad3c6e3bd25706ab90718">PIOL_META_ySrc</a></div><div class="ttdoc">The source y coordinate. </div><div class="ttdef"><b>Definition:</b> <a href="Meta_8h_source.html#l00089">Meta.h:89</a></div></div>
<div class="ttc" id="classexseis_1_1Flow_1_1Set_html_a645063a4fcdb9406b69610e593bb80fe"><div class="ttname"><a href="classexseis_1_1Flow_1_1Set.html#a645063a4fcdb9406b69610e593bb80fe">exseis::Flow::Set::temporalFilter</a></div><div class="ttdeci">void temporalFilter(exseis::PIOL::FltrType type, exseis::PIOL::FltrDmn domain, exseis::PIOL::PadType pad, exseis::utils::Trace_value fs, std::vector&lt; exseis::utils::Trace_value &gt; corners, size_t nw=0U, size_t winCntr=0U)</div><div class="ttdef"><b>Definition:</b> <a href="Set_8cc_source.html#l00750">Set.cc:750</a></div></div>
<div class="ttc" id="namespaceexseis_1_1Flow_html_ad1580c3d2a940395d45569c3cb0319abaff12fbc3400acf905eee22b074704bd3"><div class="ttname"><a href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319abaff12fbc3400acf905eee22b074704bd3">exseis::Flow::FuncOpt::SingleTrace</a></div><div class="ttdoc">Each output trace requires info from one input trace. </div></div>
<div class="ttc" id="classexseis_1_1Flow_1_1Set_html_a1cb3f7abd880e38ece99eeafb3a2c3ab"><div class="ttname"><a href="classexseis_1_1Flow_1_1Set.html#a1cb3f7abd880e38ece99eeafb3a2c3ab">exseis::Flow::Set::rule</a></div><div class="ttdeci">std::shared_ptr&lt; exseis::PIOL::Rule &gt; rule</div><div class="ttdoc">Contains a pointer to the Rules for parameters. </div><div class="ttdef"><b>Definition:</b> <a href="Set_8hh_source.html#l00060">Set.hh:60</a></div></div>
<div class="ttc" id="classexseis_1_1Flow_1_1Set_html_a530bb61158d2c999faf0d290b3758cc8"><div class="ttname"><a href="classexseis_1_1Flow_1_1Set.html#a530bb61158d2c999faf0d290b3758cc8">exseis::Flow::Set::outfix</a></div><div class="ttdeci">std::string outfix</div><div class="ttdoc">The output prefix. </div><div class="ttdef"><b>Definition:</b> <a href="Set_8hh_source.html#l00045">Set.hh:45</a></div></div>
<div class="ttc" id="structexseis_1_1Flow_1_1Op_html"><div class="ttname"><a href="structexseis_1_1Flow_1_1Op.html">exseis::Flow::Op</a></div><div class="ttdef"><b>Definition:</b> <a href="Op_8hh_source.html#l00021">Op.hh:21</a></div></div>
<div class="ttc" id="namespaceexseis_1_1PIOL_html_a6194400d36a1a5c9d26a8f6e6413a658"><div class="ttname"><a href="namespaceexseis_1_1PIOL.html#a6194400d36a1a5c9d26a8f6e6413a658">exseis::PIOL::sort</a></div><div class="ttdeci">std::vector&lt; size_t &gt; sort(ExSeisPIOL *piol, SortType type, Param *prm)</div><div class="ttdef"><b>Definition:</b> <a href="src_2sort_8cc_source.html#l00398">sort.cc:398</a></div></div>
<div class="ttc" id="classexseis_1_1Flow_1_1Set_html_a198f055d3c4ce2eb9473fd61f015b6ae"><div class="ttname"><a href="classexseis_1_1Flow_1_1Set.html#a198f055d3c4ce2eb9473fd61f015b6ae">exseis::Flow::Set::drop</a></div><div class="ttdeci">void drop(void)</div><div class="ttdef"><b>Definition:</b> <a href="Set_8hh_source.html#l00076">Set.hh:76</a></div></div>
<div class="ttc" id="classexseis_1_1PIOL_1_1ReadInterface_html_a316589ca71e7607b65f916c24b8a0f93"><div class="ttname"><a href="classexseis_1_1PIOL_1_1ReadInterface.html#a316589ca71e7607b65f916c24b8a0f93">exseis::PIOL::ReadInterface::readTraceNonContiguous</a></div><div class="ttdeci">virtual void readTraceNonContiguous(size_t sz, const size_t *offset, exseis::utils::Trace_value *trace, Param *prm=PIOL_PARAM_NULL, size_t skip=0) const =0</div><div class="ttdoc">Read the traces specified by the offsets in the passed offset array. Assumes Monotonic. </div></div>
<div class="ttc" id="structexseis_1_1Flow_1_1TraceBlock_html_a943bec10b59c6672a1077285c902ba5e"><div class="ttname"><a href="structexseis_1_1Flow_1_1TraceBlock.html#a943bec10b59c6672a1077285c902ba5e">exseis::Flow::TraceBlock::ns</a></div><div class="ttdeci">size_t ns</div><div class="ttdoc">Number of samples per trace. </div><div class="ttdef"><b>Definition:</b> <a href="TraceBlock_8hh_source.html#l00026">TraceBlock.hh:26</a></div></div>
<div class="ttc" id="classexseis_1_1Flow_1_1Set_html_a16775d9b078ad31adc28f10f8349e6f3"><div class="ttname"><a href="classexseis_1_1Flow_1_1Set.html#a16775d9b078ad31adc28f10f8349e6f3">exseis::Flow::Set::output</a></div><div class="ttdeci">std::vector&lt; std::string &gt; output(std::string oname)</div><div class="ttdef"><b>Definition:</b> <a href="Set_8cc_source.html#l00502">Set.cc:502</a></div></div>
<div class="ttc" id="classexseis_1_1Flow_1_1Set_html_a095fbcda5adb6077e875fee371b3456d"><div class="ttname"><a href="classexseis_1_1Flow_1_1Set.html#a095fbcda5adb6077e875fee371b3456d">exseis::Flow::Set::text</a></div><div class="ttdeci">void text(std::string outmsg_)</div><div class="ttdef"><b>Definition:</b> <a href="Set_8cc_source.html#l00715">Set.cc:715</a></div></div>
<div class="ttc" id="namespaceexseis_1_1Flow_html_ad1580c3d2a940395d45569c3cb0319ab"><div class="ttname"><a href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319ab">exseis::Flow::FuncOpt</a></div><div class="ttdeci">FuncOpt</div><div class="ttdef"><b>Definition:</b> <a href="FuncOpt_8hh_source.html#l00014">FuncOpt.hh:14</a></div></div>
<div class="ttc" id="classexseis_1_1Flow_1_1Set_html_acc4506a2b1148d77e698c5bcb7d3d2ed"><div class="ttname"><a href="classexseis_1_1Flow_1_1Set.html#acc4506a2b1148d77e698c5bcb7d3d2ed">exseis::Flow::Set::fmap</a></div><div class="ttdeci">std::map&lt; std::pair&lt; size_t, exseis::utils::Floating_point &gt;, FileDeque &gt; fmap</div><div class="ttdoc">A map of (ns, inc) key to a deque of file descriptor pointers. </div><div class="ttdef"><b>Definition:</b> <a href="Set_8hh_source.html#l00054">Set.hh:54</a></div></div>
<div class="ttc" id="namespaceexseis_1_1utils_1_1typedefs_html_ab5b5063f7f6145715cf319bb08430bbd"><div class="ttname"><a href="namespaceexseis_1_1utils_1_1typedefs.html#ab5b5063f7f6145715cf319bb08430bbd">exseis::utils::typedefs::Floating_point</a></div><div class="ttdeci">double Floating_point</div><div class="ttdef"><b>Definition:</b> <a href="typedefs_8h_source.html#l00061">typedefs.h:61</a></div></div>
<div class="ttc" id="classexseis_1_1PIOL_1_1ReadInterface_html_ae927839306eb544ba2d13236d79b95c2"><div class="ttname"><a href="classexseis_1_1PIOL_1_1ReadInterface.html#ae927839306eb544ba2d13236d79b95c2">exseis::PIOL::ReadInterface::readNs</a></div><div class="ttdeci">virtual size_t readNs(void) const </div><div class="ttdoc">Read the number of samples per trace. </div><div class="ttdef"><b>Definition:</b> <a href="ReadInterface_8cc_source.html#l00039">ReadInterface.cc:39</a></div></div>
<div class="ttc" id="classexseis_1_1Flow_1_1Set_html_a4caa9335891459549ac8e5e9d527395d"><div class="ttname"><a href="classexseis_1_1Flow_1_1Set.html#a4caa9335891459549ac8e5e9d527395d">exseis::Flow::Set::FileDeque</a></div><div class="ttdeci">std::deque&lt; std::shared_ptr&lt; FileDesc &gt; &gt; FileDeque</div><div class="ttdoc">Typedef for passing in a list of FileDesc objects. </div><div class="ttdef"><b>Definition:</b> <a href="Set_8hh_source.html#l00035">Set.hh:35</a></div></div>
<div class="ttc" id="namespaceexseis_1_1utils_1_1signal__processing_html_aa5e5cafa882a0d140c714ed82decf47d"><div class="ttname"><a href="namespaceexseis_1_1utils_1_1signal__processing.html#aa5e5cafa882a0d140c714ed82decf47d">exseis::utils::signal_processing::Taper_function</a></div><div class="ttdeci">Trace_value(*)(Trace_value position, Trace_value width) Taper_function</div><div class="ttdoc">A function for tapering a signal at one or both ends. </div><div class="ttdef"><b>Definition:</b> <a href="Taper__function_8h_source.html#l00044">Taper_function.h:44</a></div></div>
<div class="ttc" id="namespaceexseis_1_1PIOL_html_aa02615e11b733881b6dd91aaa50df9ec"><div class="ttname"><a href="namespaceexseis_1_1PIOL.html#aa02615e11b733881b6dd91aaa50df9ec">exseis::PIOL::getSortIndex</a></div><div class="ttdeci">std::vector&lt; size_t &gt; getSortIndex(size_t sz, const size_t *list)</div><div class="ttdef"><b>Definition:</b> <a href="src_2sort_8cc_source.html#l00029">sort.cc:29</a></div></div>
<div class="ttc" id="Meta_8h_html_a06fc87d81c62e9abb8790b6e5713c55ba85ba03f9a8978665567fb0425807ef1d"><div class="ttname"><a href="Meta_8h.html#a06fc87d81c62e9abb8790b6e5713c55ba85ba03f9a8978665567fb0425807ef1d">PIOL_META_il</a></div><div class="ttdoc">The inline number. </div><div class="ttdef"><b>Definition:</b> <a href="Meta_8h_source.html#l00104">Meta.h:104</a></div></div>
<div class="ttc" id="classexseis_1_1Flow_1_1Set_html_af2792608f724628070978d52d09d4993"><div class="ttname"><a href="classexseis_1_1Flow_1_1Set.html#af2792608f724628070978d52d09d4993">exseis::Flow::Set::calcFunc</a></div><div class="ttdeci">std::vector&lt; std::string &gt; calcFunc(FuncLst::iterator fCurr, FuncLst::iterator fEnd)</div><div class="ttdef"><b>Definition:</b> <a href="Set_8cc_source.html#l00452">Set.cc:452</a></div></div>
<div class="ttc" id="classexseis_1_1Flow_1_1Set_html_ab9472ef15983375110b9fce89c38e013"><div class="ttname"><a href="classexseis_1_1Flow_1_1Set.html#ab9472ef15983375110b9fce89c38e013">exseis::Flow::Set::rank</a></div><div class="ttdeci">size_t rank</div><div class="ttdoc">The rank of the particular process. </div><div class="ttdef"><b>Definition:</b> <a href="Set_8hh_source.html#l00069">Set.hh:69</a></div></div>
<div class="ttc" id="classexseis_1_1Flow_1_1Set_html_a28b76307c3b7531fe44d786736db0d57"><div class="ttname"><a href="classexseis_1_1Flow_1_1Set.html#a28b76307c3b7531fe44d786736db0d57">exseis::Flow::Set::cache</a></div><div class="ttdeci">Cache cache</div><div class="ttdoc">The cache of parameters and traces. </div><div class="ttdef"><b>Definition:</b> <a href="Set_8hh_source.html#l00063">Set.hh:63</a></div></div>
<div class="ttc" id="Meta_8h_html_a06fc87d81c62e9abb8790b6e5713c55ba6bb6438737e09d618ae4e6ac7623a4fd"><div class="ttname"><a href="Meta_8h.html#a06fc87d81c62e9abb8790b6e5713c55ba6bb6438737e09d618ae4e6ac7623a4fd">PIOL_META_Offset</a></div><div class="ttdoc">Distance from source to receiver. </div><div class="ttdef"><b>Definition:</b> <a href="Meta_8h_source.html#l00068">Meta.h:68</a></div></div>
<div class="ttc" id="classexseis_1_1Flow_1_1Set_html_a3695d248db2c3434819a5f57725af932"><div class="ttname"><a href="classexseis_1_1Flow_1_1Set.html#a3695d248db2c3434819a5f57725af932">exseis::Flow::Set::sort</a></div><div class="ttdeci">void sort(exseis::PIOL::CompareP sortFunc)</div><div class="ttdef"><b>Definition:</b> <a href="Set_8cc_source.html#l00572">Set.cc:572</a></div></div>
<div class="ttc" id="namespaceexseis_1_1utils_1_1signal__processing_html_a3fe922daf3dcc4bb4840946c56fb31b6"><div class="ttname"><a href="namespaceexseis_1_1utils_1_1signal__processing.html#a3fe922daf3dcc4bb4840946c56fb31b6">exseis::utils::signal_processing::taper</a></div><div class="ttdeci">void taper(size_t signal_size, Trace_value *signal, Taper_function taper_function, size_t left_taper_size, size_t right_taper_size)</div><div class="ttdoc">Apply a taper to a signal. </div><div class="ttdef"><b>Definition:</b> <a href="taper_8cc_source.html#l00016">taper.cc:16</a></div></div>
<div class="ttc" id="classexseis_1_1Flow_1_1Set_html_aab1e5779be267c98d09ac2375ec2e2ac"><div class="ttname"><a href="classexseis_1_1Flow_1_1Set.html#aab1e5779be267c98d09ac2375ec2e2ac">exseis::Flow::Set::add</a></div><div class="ttdeci">void add(std::unique_ptr&lt; exseis::PIOL::ReadInterface &gt; in)</div><div class="ttdef"><b>Definition:</b> <a href="Set_8cc_source.html#l00065">Set.cc:65</a></div></div>
<div class="ttc" id="namespaceexseis_1_1PIOL_html_a3a1f4505c212c3a79c533a3cc27797f4"><div class="ttname"><a href="namespaceexseis_1_1PIOL.html#a3a1f4505c212c3a79c533a3cc27797f4">exseis::PIOL::PadType</a></div><div class="ttdeci">PadType</div><div class="ttdoc">An enum class of the different types of trace padding functions. </div><div class="ttdef"><b>Definition:</b> <a href="temporalfilter_8hh_source.html#l00047">temporalfilter.hh:47</a></div></div>
<div class="ttc" id="namespaceexseis_1_1PIOL_html_a8c213c1ddcaa64ed381efb27822d4c68"><div class="ttname"><a href="namespaceexseis_1_1PIOL.html#a8c213c1ddcaa64ed381efb27822d4c68">exseis::PIOL::CompareP</a></div><div class="ttdeci">std::function&lt; bool(const Param *, const size_t, const size_t)&gt; CompareP</div><div class="ttdoc">A template for the Compare less-than function. </div><div class="ttdef"><b>Definition:</b> <a href="sort_8hh_source.html#l00029">sort.hh:29</a></div></div>
<div class="ttc" id="gather_8hh_html"><div class="ttname"><a href="gather_8hh.html">gather.hh</a></div></div>
<div class="ttc" id="structexseis_1_1PIOL_1_1Param_html"><div class="ttname"><a href="structexseis_1_1PIOL_1_1Param.html">exseis::PIOL::Param</a></div><div class="ttdef"><b>Definition:</b> <a href="Param_8h_source.html#l00047">Param.h:47</a></div></div>
<div class="ttc" id="namespaceexseis_1_1Flow_html_ad1580c3d2a940395d45569c3cb0319abaad22c799930d644e8468fe44c0312d53"><div class="ttname"><a href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319abaad22c799930d644e8468fe44c0312d53">exseis::Flow::FuncOpt::Gather</a></div><div class="ttdoc">Each output trace requires info from traces in the same gather. </div></div>
<div class="ttc" id="classexseis_1_1Flow_1_1Set_html_a8390e921618b995b4da5c5ed063dc928"><div class="ttname"><a href="classexseis_1_1Flow_1_1Set.html#a8390e921618b995b4da5c5ed063dc928">exseis::Flow::Set::offmap</a></div><div class="ttdeci">std::map&lt; std::pair&lt; size_t, exseis::utils::Floating_point &gt;, size_t &gt; offmap</div><div class="ttdoc">A map of (ns, inc) key to the current offset. </div><div class="ttdef"><b>Definition:</b> <a href="Set_8hh_source.html#l00057">Set.hh:57</a></div></div>
<div class="ttc" id="classexseis_1_1Flow_1_1Set_html_a1521b6a65f8344571bbd8b0a85fb3795"><div class="ttname"><a href="classexseis_1_1Flow_1_1Set.html#a1521b6a65f8344571bbd8b0a85fb3795">exseis::Flow::Set::summary</a></div><div class="ttdeci">void summary() const </div><div class="ttdef"><b>Definition:</b> <a href="Set_8cc_source.html#l00111">Set.cc:111</a></div></div>
<div class="ttc" id="Meta_8h_html_a06fc87d81c62e9abb8790b6e5713c55ba9e6ea6fb4da8bcba178414666819cd04"><div class="ttname"><a href="Meta_8h.html#a06fc87d81c62e9abb8790b6e5713c55ba9e6ea6fb4da8bcba178414666819cd04">PIOL_META_xSrc</a></div><div class="ttdoc">The source x coordinate. </div><div class="ttdef"><b>Definition:</b> <a href="Meta_8h_source.html#l00086">Meta.h:86</a></div></div>
<div class="ttc" id="classexseis_1_1Flow_1_1Set_html_affd40ceed2574f0578dbcf191c9f7845"><div class="ttname"><a href="classexseis_1_1Flow_1_1Set.html#affd40ceed2574f0578dbcf191c9f7845">exseis::Flow::Set::taper</a></div><div class="ttdeci">void taper(exseis::utils::Taper_function taper_function, size_t nTailLft, size_t nTailRt=0)</div><div class="ttdef"><b>Definition:</b> <a href="Set_8cc_source.html#l00665">Set.cc:665</a></div></div>
<div class="ttc" id="structexseis_1_1utils_1_1decomposition_1_1exseis__Contiguous__decomposition_html_a2bacb6e74aaba4b3719051ac2626cd81"><div class="ttname"><a href="structexseis_1_1utils_1_1decomposition_1_1exseis__Contiguous__decomposition.html#a2bacb6e74aaba4b3719051ac2626cd81">exseis::utils::decomposition::exseis_Contiguous_decomposition::local_size</a></div><div class="ttdeci">size_t local_size</div><div class="ttdoc">The local size of the section of the range on the local process. </div><div class="ttdef"><b>Definition:</b> <a href="block__decomposition_8h_source.html#l00039">block_decomposition.h:39</a></div></div>
<div class="ttc" id="RadonGatherState_8hh_html"><div class="ttname"><a href="RadonGatherState_8hh.html">RadonGatherState.hh</a></div></div>
<div class="ttc" id="classexseis_1_1Flow_1_1Set_html_aa97113d10c048fce74f34ffad50cf576"><div class="ttname"><a href="classexseis_1_1Flow_1_1Set.html#aa97113d10c048fce74f34ffad50cf576">exseis::Flow::Set::outmsg</a></div><div class="ttdeci">std::string outmsg</div><div class="ttdoc">The output text-header message. </div><div class="ttdef"><b>Definition:</b> <a href="Set_8hh_source.html#l00048">Set.hh:48</a></div></div>
<div class="ttc" id="structPIOL__CoordElem_html_a1b263b0e48ed5843706bfa765a0d637e"><div class="ttname"><a href="structPIOL__CoordElem.html#a1b263b0e48ed5843706bfa765a0d637e">PIOL_CoordElem::val</a></div><div class="ttdeci">exseis_Floating_point val</div><div class="ttdoc">The value. </div><div class="ttdef"><b>Definition:</b> <a href="minmax_8h_source.html#l00019">minmax.h:19</a></div></div>
<div class="ttc" id="namespaceexseis_1_1PIOL_html_a47c7c1740710f1e899437ba2c4a98339"><div class="ttname"><a href="namespaceexseis_1_1PIOL.html#a47c7c1740710f1e899437ba2c4a98339">exseis::PIOL::getMinMax</a></div><div class="ttdeci">void getMinMax(ExSeisPIOL *piol, size_t offset, size_t lnt, Meta m1, Meta m2, const Param *prm, CoordElem *minmax)</div><div class="ttdef"><b>Definition:</b> <a href="src_2minmax_8cc_source.html#l00016">minmax.cc:16</a></div></div>
<div class="ttc" id="classexseis_1_1Flow_1_1Set_html_a43254c7db9128d6cd1ef553b8bc175f1"><div class="ttname"><a href="classexseis_1_1Flow_1_1Set.html#a43254c7db9128d6cd1ef553b8bc175f1">exseis::Flow::Set::file</a></div><div class="ttdeci">FileDeque file</div><div class="ttdoc">A deque of unique pointers to file descriptors. </div><div class="ttdef"><b>Definition:</b> <a href="Set_8hh_source.html#l00051">Set.hh:51</a></div></div>
<div class="ttc" id="namespaceexseis_1_1Flow_html_ad1580c3d2a940395d45569c3cb0319abad1ec4debd970952ee50cf99c4dac82d5"><div class="ttname"><a href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319abad1ec4debd970952ee50cf99c4dac82d5">exseis::Flow::FuncOpt::NeedMeta</a></div><div class="ttdoc">Metadata required to be read. </div></div>
<div class="ttc" id="classexseis_1_1Flow_1_1Set_html_a4c414ed902bc8827a8a3b5cb332782f0"><div class="ttname"><a href="classexseis_1_1Flow_1_1Set.html#a4c414ed902bc8827a8a3b5cb332782f0">exseis::Flow::Set::toAngle</a></div><div class="ttdeci">void toAngle(std::string vmName, size_t vBin, size_t oGSz, exseis::utils::Floating_point oInc=std::atan(1)*4.0/180)</div><div class="ttdef"><b>Definition:</b> <a href="Set_8cc_source.html#l00606">Set.cc:606</a></div></div>
<div class="ttc" id="namespaceexseis_1_1utils_1_1typedefs_html_aebc7c2b48137ffa59c6d49a5fc8963c4"><div class="ttname"><a href="namespaceexseis_1_1utils_1_1typedefs.html#aebc7c2b48137ffa59c6d49a5fc8963c4">exseis::utils::typedefs::Integer</a></div><div class="ttdeci">long long int Integer</div><div class="ttdef"><b>Definition:</b> <a href="typedefs_8h_source.html#l00035">typedefs.h:35</a></div></div>
<div class="ttc" id="namespaceexseis_1_1Flow_html_ad1580c3d2a940395d45569c3cb0319aba30ee788a8ff4119624377271436e3c82"><div class="ttname"><a href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319aba30ee788a8ff4119624377271436e3c82">exseis::Flow::FuncOpt::DepTrcVal</a></div><div class="ttdoc">There is a dependency on the value of traces. </div></div>
<div class="ttc" id="classexseis_1_1Flow_1_1Set_html_ad059fa8f43f989a01b7713a589d8b3ec"><div class="ttname"><a href="classexseis_1_1Flow_1_1Set.html#ad059fa8f43f989a01b7713a589d8b3ec">exseis::Flow::Set::FuncLst</a></div><div class="ttdeci">std::list&lt; std::shared_ptr&lt; OpParent &gt; &gt; FuncLst</div><div class="ttdoc">The function list type for the set layer. </div><div class="ttdef"><b>Definition:</b> <a href="Set_8hh_source.html#l00038">Set.hh:38</a></div></div>
<div class="ttc" id="classexseis_1_1Flow_1_1Set_html_afc31bd4caaed6a9b4dad64c613253ff1"><div class="ttname"><a href="classexseis_1_1Flow_1_1Set.html#afc31bd4caaed6a9b4dad64c613253ff1">exseis::Flow::Set::func</a></div><div class="ttdeci">FuncLst func</div><div class="ttdoc">The list of functions and related data. </div><div class="ttdef"><b>Definition:</b> <a href="Set_8hh_source.html#l00066">Set.hh:66</a></div></div>
<div class="ttc" id="structexseis_1_1Flow_1_1TraceBlock_html_ad4a1709bba637d2567b1e42bca98a307"><div class="ttname"><a href="structexseis_1_1Flow_1_1TraceBlock.html#ad4a1709bba637d2567b1e42bca98a307">exseis::Flow::TraceBlock::gNum</a></div><div class="ttdeci">size_t gNum</div><div class="ttdoc">Gather number (if applicable) </div><div class="ttdef"><b>Definition:</b> <a href="TraceBlock_8hh_source.html#l00032">TraceBlock.hh:32</a></div></div>
<div class="ttc" id="namespaceexseis_1_1PIOL_html_a9069647cb4d44fcbd30ceced3606dd29"><div class="ttname"><a href="namespaceexseis_1_1PIOL.html#a9069647cb4d44fcbd30ceced3606dd29">exseis::PIOL::off</a></div><div class="ttdeci">exseis::utils::Floating_point off(exseis::utils::Floating_point sx, exseis::utils::Floating_point sy, exseis::utils::Floating_point rx, exseis::utils::Floating_point ry)</div><div class="ttdef"><b>Definition:</b> <a href="src_2sort_8cc_source.html#l00046">sort.cc:46</a></div></div>
<div class="ttc" id="namespaceexseis_1_1Flow_html_ad1580c3d2a940395d45569c3cb0319aba7b59aca1d9729394302efc125afb53b4"><div class="ttname"><a href="namespaceexseis_1_1Flow.html#ad1580c3d2a940395d45569c3cb0319aba7b59aca1d9729394302efc125afb53b4">exseis::Flow::FuncOpt::ModMetaVal</a></div><div class="ttdoc">Metadata values are modified by the operation. </div></div>
<div class="ttc" id="namespaceexseis_1_1PIOL_html_a4529a9993c29d359eca51832a8bbf074"><div class="ttname"><a href="namespaceexseis_1_1PIOL.html#a4529a9993c29d359eca51832a8bbf074">exseis::PIOL::FltrDmn</a></div><div class="ttdeci">FltrDmn</div><div class="ttdoc">An enum class of the different types of filtering domains. </div><div class="ttdef"><b>Definition:</b> <a href="temporalfilter_8hh_source.html#l00038">temporalfilter.hh:38</a></div></div>
<div class="ttc" id="namespaceexseis_1_1PIOL_html_a5b9dd1fe7ee68519178112abb8da6355"><div class="ttname"><a href="namespaceexseis_1_1PIOL.html#a5b9dd1fe7ee68519178112abb8da6355">exseis::PIOL::SortType</a></div><div class="ttdeci">PIOL_SortType SortType</div><div class="ttdef"><b>Definition:</b> <a href="SortType_8h_source.html#l00017">SortType.h:17</a></div></div>
<div class="ttc" id="namespaceexseis_1_1utils_1_1signal__processing_html_ac3657297390aa12deb2b01be9bd41941"><div class="ttname"><a href="namespaceexseis_1_1utils_1_1signal__processing.html#ac3657297390aa12deb2b01be9bd41941">exseis::utils::signal_processing::AGC</a></div><div class="ttdeci">void AGC(size_t signal_size, Trace_value *signal, Gain_function gain_function, size_t window_size, Trace_value target_amplitude)</div><div class="ttdoc">Apply automatic gain control to a set of tapers &gt; used for actual operation during output...</div><div class="ttdef"><b>Definition:</b> <a href="AGC_8cc_source.html#l00022">AGC.cc:22</a></div></div>
<div class="ttc" id="namespaceexseis_1_1utils_1_1typedefs_html_a64100d12222e082dacce5e42e58b4499"><div class="ttname"><a href="namespaceexseis_1_1utils_1_1typedefs.html#a64100d12222e082dacce5e42e58b4499">exseis::utils::typedefs::Trace_value</a></div><div class="ttdeci">float Trace_value</div><div class="ttdef"><b>Definition:</b> <a href="typedefs_8h_source.html#l00086">typedefs.h:86</a></div></div>
<div class="ttc" id="namespaceexseis_1_1Flow_html_a45e455f7e693a68b1678eb3a44f99534"><div class="ttname"><a href="namespaceexseis_1_1Flow.html#a45e455f7e693a68b1678eb3a44f99534">exseis::Flow::InPlaceMod</a></div><div class="ttdeci">std::function&lt; std::vector&lt; size_t &gt;TraceBlock *data)&gt; InPlaceMod</div><div class="ttdef"><b>Definition:</b> <a href="Set_8cc_source.html#l00031">Set.cc:31</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_f9797cc7523fcb3a2eda2d4764c4b6be.html">Flow</a></li><li class="navelem"><b>Set.cc</b></li>
    <li class="footer">Generated on Mon Aug 13 2018 18:57:41 for ExSeisDat by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
